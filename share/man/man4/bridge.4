.\"
.\" $FreeBSD$
.\"
.Dd Sep 28, 1998
.Dt BRIDGE 4
.Os
.Sh NAME
.Nm bridge
.Nd Bridging support
.Sh DESCRIPTION
Starting from version 2.2.8,
.Fx
supports bridging on ethernet-type
interfaces.
This is achieved using the following option
.Bd -literal
    options BRIDGE
.Ed
.Pp
in the kernel config file, and is controlled by two
.Nm sysctl
variables:
.Bd -literal
    net.link.ether.bridge
.Ed
.Pp
Set to 1 to enable bridging, set to 0 to disable it
.Bd -literal
    net.link.ether.bridge_ipfw
.Ed
.Pp
Set to 1 to enable
.Nm ipfw
filtering on bridged packets.
Note that
.Nm ipfw
rules only apply
to IP packets.
Non-IP packets are subject to the default
.Nm ipfw
rule
.Pq number 65535
which must be an
.Ar allow
rule if we want ARP and other non-IP packets to flow through the
bridge.
.Sh BUGS
.Pp
Care must be taken not to construct loops in the bridge topology.
The kernel supports only a primitive form of loop detection, by disabling
some interfaces when a loop is detected.
No support for a daemon running the
spanning tree algorithm is currently provided.
.Pp
With bridging active, interfaces are in promiscuous mode,
thus causing some load on the system to receive and filter
out undesired traffic.
.Pp
Extended functionality to enable bridging selectively on clusters
of interfaces is still in the works.
.Pp
Interfaces that cannot be put into promiscuous mode or that don't
support sending packets with arbitrary Ethernet source addresses
are not compatible with bridging.
.Sh SEE ALSO
.Xr ip 4 ,
.Xr ng_bridge 4 ,
.Xr ipfw 8 ,
.Xr sysctl 8
.Sh HISTORY
.Nm
bridging was introduced in
.Fx 2.2.8
by
.An Luigi Rizzo Aq luigi@iet.unipi.it .
