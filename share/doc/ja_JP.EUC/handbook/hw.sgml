<!-- $Id: hw.sgml,v 1.11 1997/03/03 04:46:59 hanai Exp $ -->
<!-- The FreeBSD Japanese Documentation Project -->
<!-- Original revision: 1.65 -->

<!--
<!DOCTYPE chapt PUBLIC "-//FreeBSD//DTD linuxdoc//EN"> -->

<!--
<p><em>原作: The FreeBSD Documentation Project .</em>
-->

<chapt><heading>PC ハードウェアコンパチビリティ<label id="hw"></heading>
<p><em>訳: &a.yoshiaki; . <newline> 1 March 1997. </em>

  <p>ハードウェアコンパチビリティの問題は現在のコンピュータ業界でもっ
  とも多く起きる種類の問題であり, FreeBSDもこれに無縁ではありません.
  市場にある驚くほど多様な種類の製品をサポートしたことで,安価に普及し
  ている PCハードウェアで動かすことができるという FreeBSDの利点はこの
  点では不利でもあります.
  FreeBSDのサポートするハードウェアを徹底的に調べて提供することは不
  可能ですが, このセクションでは FreeBSDに含まれるデバイスドライバとそ
  のドライバがサポートするハードウェアのカタログを示します. 可能で適切
  なものについては特定の製品についての注釈を含めました. 

   FreeBSD はボランティアプロジェクトでテスト部門には資金がありません
   から, より多くの情報をこのカタログに載せるにはあなたがたユーザに
   頼らなければなりません.  あなた自身の経験により, あるハードウェアが
   FreeBSDで動くか動かないかがわかったとしたら&a.doc;
   へ e-mailして知らせてください. サポートされているハードウェアについて
   の質問は, &a.questions;(詳しいことは
   <ref id="eresources:mail" name="メーリングリスト">を参照してください) へ
   宛ててください. 情報を提供したり質問をする時は FreeBSDのバージョンと使っ
   ているハードウェアのできるだけ詳しい情報を含めることを忘れないでくだ
   さい.

<sect><heading>インターネット上のリソース</heading>
<p> 以下のリンクはハードウェアを選ぶのに役に立ちます. FreeBSDに対して
は必要のない (あるいは適用できない) ように見えるかもしれませんが, ここ
からのハードウェアの情報のほとんどは OSに依存しないものです.
購入をする前にはあなたの選んだものがサポートされているか FreeBSDハード
ウェアガイドを注意して読んでください. </p>

    <p>
    <itemize>
       <item><htmlurl url="http://sysdoc.pair.com"
       name="Toms's Hardware &amp; Performance Guide"></item>
    </itemize>


	<p>訳注: 日本国内でFreeBSDの動くハードウェアの情報を提供してい
るWWWサーバがあります.

<itemize>
<htmlurl url="http://freebsd.chem.nagoya-u.ac.jp/~ugoita/"
name="FreeBSD POWERED hardwares"> 
</itemize>

これ以外にも情報を提供しているサーバはあります. いくつかの URLについて
は<htmlurl url="http://www.jp.freebsd.org" name="FreeBSD Japan.">
からたどることができます.

<sect><heading>組合せの見本<label id="hw:configs"></heading>
<p>以下のハードウェアの組合せのサンプルリストはハードウェアベンダや 
<em>FreeBSD プロジェクト</em>が保証するものではありません. この情
報は公共の利益のために公開しているものであり, 極めて数多くあるであろう
異なったハードウェアの組合せの中からのある経験のカタログに過ぎません.
やり方はいろいろあります.
場合によってはうまく行かないこともあります. 十分気をつけてください.

 <sect1><heading>Jordan氏の選んだ組合せ</heading>
    <p>私の作ったワークステーションとサーバの構成はまずまずうまく行っ
    ています. 私はこれを保証できるわけでもありませんし, ここにあげた組
    合せがずっと "best buys"であるわけではありません. 私はできればリス
    トを更新して行きますがそれがいつになるかはわかりません.

訳注: &a.jkh; 氏は FreeBSDプロジェクト<ref id="contrib:core"
 name="FreeBSDコアチーム">のメンバです.

  <sect2><heading>マザーボード<label id="hw:mb"></heading>
    <p> <htmlurl url="http://asustek.asus.com.tw/" name="ASUS">
    <htmlurl
     url="http://asustek.asus.com.tw/FTP/ASUS/Info/Spec/pi-p55tp4.txt" 
     name="P55T2P4">
     はミッドレンジからハイエンドの Pentiumサーバあるいはワークステーショ
     ンシステムにはよい選択です. 
     486クラスのマザーボードを探しているなら ASUSの <htmlurl
     url="http://asustek.asus.com.tw/FTP/ASUS/Info/Spec/pvi-486sp3.txt"
     name="486SP3G"> を調べてみることをおすすめします (注: ASUSはこれら
     を既に製造していないのは明らかなのでこれらのものはだんだん手に入
     りにくくなっています).

     フォルトトレラントシステムを構築したいのであればパリティメモリを
     使い, 真に24時間/週7日間動作させ続けるアプリケーションであれば 
     ECCメモリを使うべきでしょう. ECCメモリはいくらか性能のトレードオ
     フがあります (それが重要なものであるかそうでないかはあなたのアプ
     リケーションによりますが). しかし, メモリエラーに対しては明らかに
     フォルトトレランス性が強化されます. 

     <p>ハイエンドにおいては FreeBSDでは 200MHzの P6 (Pentium Pro) CPU
     を使ったIntel/Venus Pro (<ref id="hw:mb:pci" name="VS440FX">) マ
     ザーボードが非常によいようです. 最近の価格の下落
     で最近の米国内では P6システムは十分購入の候補に
     なる程度に価格が下がっています. また, 本格的なサーバ用途には 
     Pentium Pro を考えていいでしょう.
     私が個人的に使用しているシステムでは, `make world' にかかる時間が
     P5/166で3時間40分かかっていたものが, P6/200にアップグレードしたら
     1時間22分にまで短くなりました - もちろん正当な比較ではありません
     が,私にとっては生産性の点で P6/200は明らかな価値があるということ
     を述べておきます.

   注: Intel のマザーボードは従来とは異る形状で, "ATX" ケースデザイン
   と呼ばれる<em>従来とはまったく異る PCケース</em>が必要になっています.
   今あるシステムをアップグレードしようと考えているならこのことを十分
   考えましょう - 私のこれまでに知る限りでは, 現在入手可能な ATXケース
   はすべて 「ミドルタワー (midi-tower)」で, ドライブなどの内蔵周辺機器
   を格納するスペースに制限があります. 利点としては, ほとんどの ATXケー
   スは一般的な PCケースに比較して非常に品質の高いもののようであるとい
   うことがあります.

     <ref id="hw:mb:pci" name="VS440FX">チップセット (``Natoma''と呼
     ばれています) で唯一知られているコンパチビリティの問題は Matrox
     Meteorビデオキャプチャー (frame-grabber) ボードを使うとシステムが
     停止してしまうことです.  Matrox は Intel を非難し, Intel は 
     Matrox を非難しています. 私たちにわかることは動かないということだ
     けです. 私の P6システムで問題が起きたのはこのカードだけであり, こ
     のカードは古い Triton チップセットベースのマザーボードでは問題な
     く動いています.

     訳注: 実際には他社の frame-grabberボードでも Natoma チップセット
     のマシンで問題が起きるものがあります. ただし FreeBSDのドライバ 
     があり, FreeBSD上で利用できるものでは Matrox Mentor のみというこ
     とになります.  なお Matrox 社は新製品という形で Natoma に対応する
     というコメントを出しています.

  <sect2><heading>ディスクコントローラ</heading>
    <p>これはいくらかトリッキーです. 私は ISAから PCIまですべてコンパチブ
    ルな <htmlurl url="http://www.buslogic.com" name="Buslogic"> コント
    ローラを使うようにすすめていましたが, 現在では ISAでは
    <htmlurl url="http://www.adaptec.com" name="Adaptec"> 1542CF, EISA
    では Bt747c, PCIでは Adaptec 2940 をすすめるよう変わってきています.

     NCR/Symbios の PCIカードも私のところではうまく動いています, ただ
     し BIOS-less モデルのボード(SCSI ボード上に ROMらしいものがない
     場合は, マザーボード上に SCSIアダプタのための BIOSが必要な
     ボードである可能性があります 訳注: SC-200など) を使うのであれば
     マザーボードがそれをサポートしているかどうか注意しなくてはなりま
     せん. 

     <p>PCIマシンで2つ以上の SCSIコントローラが必要となるのであれば,
     PCIバスの不足を防ぐために Adaptec 3940 カードを考えてもいいでしょ
     う. これは1つのスロットで2台の SCSIコントローラ(と内部バス)を持ち
     ます.

  <sect2><heading>ディスクドライブ<label id="hw:disks"></heading>
    <p>私は,極々特殊な状況を除いて 「それだけのお金をかけることができる
    なら SCSIは IDEよりもよい」 と言っています. 小規模なデスクトップ構成
    のシステムでも, SCSIであればディスクが安くなっていった時にサーバの
     (古い入れ換えた) ディスクを比較的簡単に移し替えることができます. あ
    なたが複数のマシンの管理をしているのであれば単純に容量について考え
    るのではなく, 食物連鎖のように考えましょう.

    <p>私は今のところは NFSサーバや NEWSサーバのようにマルチユーザに
    よる激しいディスク disk I/Oがおこなわれる用途以外ではお金をかけてま
    で SCSI WIDEドライブにする必要はないと考えています.

<sect2><heading>CDROM ドライブ<label id="hw:cdrom"></heading>
    <p>私は SCSIの方が好みであるのでもちろん SCSI CDROMを選びました.
    <htmlurl url="http://www.toshiba.com" name="東芝"> XM-3501B (現
    在はキャディレスモデルの XM-5401Bがリリースされています)ドライブは
    どんな時もうまく動いてくれていますが, 最近は<htmlurl
    url="http://www.plextor.com" name="Plextor"> の PX-12CS ドライブを
    すっかり気に入っています. これは 12倍速のドライブで, 高性能で信頼
    性も高いものです. 

    <p>一般的には, 大部分の SCSI CDROM ドライブは私の見た限りではほと
    んどしっかりした構造ですので 多分 HPや NECの SCSI CDROMでも問題が起き
    ることはないでしょう. SCSI CDROM の価格はここ数ヶ月でかなり下落したよ
    うで, 技術的に 優れた方法でありながら 現在では IDE CDROMと同じ程度の価
    格になって います. もし IDE と SCSI の CDROM ドライブの間で選択す
    ることができるのなら, 特に IDE を選ぶ理由はないでしょう.

  <sect2><heading>CD-R (CD Recordable: WORM) ドライブ<label
     id="hw:worm">/heading> 
    <p>この原稿を書いている時点で, FreeBSDは 3種類の CDRドライブ
    (私は これらすべては結局は Phillips社のドライブであるのではない
    かと考えているのですが) をサポートしています : Phillips CDD 522
    (Plasmon のドライブと同様の動作をします), PLASMON RF4100, HP 4020i 
    です. 私は HP 4020i を CDROMを焼くのに使っています(2.2-current で
    使っています - 2.1.5以前のリリースの SCSIコードでは動きません).
    非常に調子よく動いています.  2.2 システムの <htmlurl
    url="file:/usr/share/examples/worm" name="/usr/share/examples/worm"> 
    を見てください. ISO9660ファイルシステムイメージ (RockRidge拡張) を作
    るスクリプトと それをHP4020i CDR で焼くためのスクリプトの例があり
    ます.

  <sect2><heading>テープドライブ<label id="hw:tape"></heading>
   <p>私はたまたま <htmlurl url="http://www.exabyte.com"
   name="Exabyte"> の
   <htmlurl url="http://www.Exabyte.COM:80/Products/8mm/8505XL/Rfeatures.html"
   name="8mm drives"> と <htmlurl url="http://www.hp.com" name="HP">の
   <htmlurl url="http://www-dmo.external.hp.com:80/tape/_cpb0001.htm"
   name="4mm (DAT)"> を持っています.

  <p>バックアップのためであれば, より本質的に丈夫な (また, より容量が大きい)
  Exabyteの 8mmテープの方がおすすめできます.

  <sect2><heading>ビデオカード<label id="hw:video"></heading>
    <p>もし (米国では) 99USドルをかけて商品の Xサーバを<htmlurl
    url="http://www.xinside.com/" name="Xi Graphics, Inc. (以前の X
    Inside, Inc.)">から買うことができる 
    なら間違いなく <htmlurl url="http://www.matrox.com/" name="Matrox">
    <htmlurl url="http://www.matrox.com/mgaweb/brochure.htm"
    name="Millenium">カードをおすすめします. このカードは無償提供されている <htmlurl
    url="http://www.xfree86.org"  name="XFree86"> でもサポートされて
    いますが現時点では依然 XiGの製品に比べるといくらか遅いと言えます.
    XFree86 3.2Aではいくらか改善されていますが, 一般リリースとしては
    まだ使えません(訳注: 3.2A は試験的リリースです). 

    <htmlurl url="http://www.nine.com/" name="Number 9">の 
    S3 Vision 868と 968 ベースのカード (the 9FX series) はわりあいと速く,
    <htmlurl url="http://www.xfree86.org" name="XFree86">の S3サーバで
    うまくサポートされており, きっと問題も起きないでしょう.

 <sect2><heading>モニタ<label id="hw:monitors"></heading>
    <p>私の持っている <htmlurl
   url="http://cons3.sel.sony.com/SEL/ccpg/display/ms17se2.html"
   name="Sony Multiscan 17SE monitors"> は非常に調子がいいので, 同じ (トリ
   ニトロン) ブラウン管を使っている Viewsonicをおすすめします. 17"よりも
   大きなモニタ, 例えば 21"のモニタが実際に必要だとしたらこの文章の執
   筆時点では 2,500USドル以下のものはまったくすすめられません. 20"以上のク
   ラスでよいモニタは(いくつも)ありますし, 20"クラスで安いモニタもあり
   ます.  うまくいかないことに安くてよいモニタはほとんどありません!

  <sect2><heading>ネットワーキング<label id="hw:networking"></heading>
    <p>私は ISAカードでは <htmlurl url="http://www.smc.com/"
    name="SMC"> Ultra 16 コントローラを, PCIベースのカードでは SMC
    EtherPower と Compex ENET32カードをおすすめできます. この2種類の PCI
    カードは DECの DC21041イーサネットコントローラチップを使っています. 
    また, このチップを使っている Zynx ZX342 や DEC DE435 などのカードも
    一般的にはうまく動くでしょう.  100Mbit/sec のネットワークカードで
    は SMC SMC9332DST 10/100MB や Intel EtherExpress Pro/100B カードは
    利用できるでしょう.

    もう一方, できるだけ低コストでそこその性能で動くものを探しているな
    ら, ほとんどの NE2000のクローンはよい選択です.

   <sect2><heading>(特殊な) シリアル<label id="hw:serial"></heading>
    <p>高速のシリアル ネットワーク インタフェース (同期シリアルカード)
     を探しているのであれば <htmlurl url="http://www.dgii.com/"
     name="Digi International">製の <htmlurl
     url="http://www.dgii.com/prodprofiles/profiles-prices/di
     giprofiles/digispecs/sync570.html" name="SYNC/570"> シリーズのド
     ライバが今の FreeBSD-currentにあります. <htmlurl
     url="http://www.etinc.com" name="Emerging Technologies"> も 提供
     するソフトウェアによりT1/E1の性能が得られるボードを製造しています.
     もっとも私が直接これらの製品を動かした経験があるわけではありません.

    訳注:Emerging TechnologiesのWebページを見るとカードのスペックに
     Operating Systems: MS-DOS, MS-WINDOWS, System V UNIX, BSD/OS,
      FreeBSD, NetBSD and Linux と書いてあります. また  
      "BSD/OS, FreeBSD and LINUX Router Card Solutions" というページ
      もあってサポートは良さそうです.

   <p>マルチポートカードの選択の幅はかなり広いですが, FreeBSDがサポー
    トするいう点では <htmlurl url="http://www.cyclades.com/"
    name="Cyclades">の製品が最も信頼できるでしょう. この最大の理由はこ
    の会社が私たちに十分な評価用ボードとスペックを供給することを約束し
    てくれているからです. 私は Cyclom-16Y が最高の性能価格比であると聞
    いていましたが最近は価格のチェックはしていません.

    訳注: cycladesの WWWサーバでも Supported Operating Systemsに
    Linuxや BSDi, FreeBSD が明記されています.

    他のマルチポートカードで評判がよいのは BOCAおよび ASTのカードと 
    <htmlurl url="http://www.stallion.com/" name="Stallion
    Technologies">で, このカードには <htmlurl
    url="ftp://ftp.stallion.com/drivers/unsupported/freebsd/s
    talbsd-0.0.4.tar.gz" name="ここ">で非公式なドライバが提供されてい
    るようです.

   <sect2><heading>オーディオ<label id="hw:audio"></heading>
    <p>私は現在,高音質で全二重のオーディオ機能 (2DMAチャネル) を持つという
     点から <htmlurl url="http://www.gravis.com/" name="Gravis">
     Ultrasound MAX を使っています. Windows NTや OS/2でのサポートはあま
     りよくありませんので, FreeBSD, NT, OS/2のすべてで使うには推薦できま
     せん.  そのような場合には <htmlurl url="http://www.creaf.com/"
     name="クリエィティブ ラボ">の AWE32 がいいでしょう.

  <sect2><heading>ビデオキャプチャー<label id="hw:vgrabbers"></heading>
   <p>ビデオキャプチャーについては事実上一つしか選択の余地がありません.
   <htmlurl url="http://www.matrox.com/" name="Matrox">
   <htmlurl url="http://www.matrox.com/imgweb/meteor.htm" name="Meteor">
   カードです. FreeBSDはクリエィティブ ラボの古い video spigotカードの
   サポートはしていますがこれは手に入りにくくなっていますし, Meteor は
   高速のPCIインタフェースを持った新しい世代の画像取り込みボードです.
   このカードは VS440FX チップセットベースのマザーボードでは<em>動かな
   い</em>ことに注意してください. 詳細は<ref id="hw:mb" name="マザー
   ボード">の節を参照してください.

<sect><heading>中心部/プロセッサ<label id="hw:core"></heading>

<sect1><heading>マザーボード, バス, チップセット</heading>
  <sect2><heading>* ISA</heading>
  <sect2><heading>* EISA</heading>
  <sect2><heading>* VLB</heading>
 <sect2><heading>PCI<label id="hw:mb:pci"></heading>

         <p><em>原作: &a.rgrimes;.<newline>25 April 1995.</em></p>
         <p><em>更新: &a.jkh;.</em><newline>最終更新
         <em>26 August 1996.</em></p>
          <p><em>訳: &a.yoshiaki;.<newline>12 October 1996.</em></p>

          <p>Intelの PCIチップセットについて, 以下にさまざまな種類
	  の既知の不具合と問題の程度のリストを示します.
          </p>

          <p><descrip>

              <tag>Mercury:</tag> ISAバスマスタがISAとPCIブリッジの向
                こう側にある場合は,キャッシュコヒーレンシ(一貫性)の
                問題があります.  このハードウェア欠陥に対処してうま
                く動かす方法はキャッシュを offにする以外にはありません.

              <tag>Saturn-I <em> (82424ZX の rev 0, 1 ,2)</em>:</tag>
		ライトバックキャッシュのコヒーレンシに問題があります.
		このハードウェア欠陥に対処してうまく動かす方法は外部キャッ
                シュをライトスルーにすること以外にはありませ
                ん. Saturn-IIにアップデートしましょう.

              <tag>Saturn-II <em>(82424ZX の rev 3 or 4)</em>:</tag>
		問題なく動きます. ただし多くのマザーボードではライトバッ
		ク動作に必要な 外部ダーティビット SRAMが実装されていま
		せん. 対策としてはライトスルーモードで動かすか, ダーティ
		ビット SRAMをインストールするかがあります.
                (これは ASUS PCI/I-486SP3G の rev 1.6 以降で使われています)

              <tag>Neptune:</tag> 2つより多くの(3台以上の)バスマスタデ
		バイスを動かすことができません. Intelは設計の欠陥を
		認めています. 2つを越えるバスマスタを許さない, 特別な
		設計のハードウェアで PCIバスアービタを置き換えることに
		より解決されています. (Intelの Altair boardや他にはい
                くつかの Intelサーバグループマザーボードに見られます).  そして,
                もちろん Intelの公式の回答は Triton チップセットへの
                移行で, 「こちらでは修整した」ということです.

              <tag>Triton:</tag> 知られているキャッシュコヒーレンシ
                やバスマスタの問題はありませんがパリティチェック機能が
                ありません.  パリティを使いたいような場合は, 可能であ
                れば Triton-II ベースのマザーボードを選びましょう.

              <tag>Triton-II:</tag> このチップセット
              を使っているマザーボードに関するすべての報告によれば今の
              ところ好評です. 既知の問題はありません.

             <tag>Orion:</tag> このチップセットの初期のバージョンでは
               PCI write-posting にバグがあり, 大量の PCIバストラフィッ
               クのあるアプリケーションでは性能の著しい低下があるとい
               う障害がありました. B0以降のリビジョンのチップセットで
	       は問題は解決されています.

             <tag><htmlurl
             url="http://www-cs.intel.com/oem_developer/motherbd/vs_index.htm"
             name="VS440FX">:</tag>これは<htmlurl
             url="http://www.intel.com/procs/ppro/intro/index.htm"
             name="Pentium Pro"> に対応したチップセットで, 初期の 
	     Orionチップセットにあったような問題は見られず, 問題なく動
	     いているようです. また, これは ECCやパリティを含んだ広い
             種類のメモリに対応しています. 既知の問題は Matrox Meteor 
             ビデオキャプチャカードに関するものだけです.
            </descrip>
          </p>

<sect1><heading>CPU/FPU</heading>
  <sect2><heading>* Pentium Pro クラス</heading>
  <sect2><heading>Pentium クラス</heading>
     <sect3><heading>クロックスピード</heading>
     <p><em>原作  &a.rgrimes;.<newline>1 October 1996.</em></p>
       <p>Pentium クラスのマシンはシステムのいくつかの部分で異なったク
         ロックスピードを使っています. これは CPU, 外部メモリバス, PCI
         バスです. 別々のクロックスピードが使われるために 「高速な」
         CPUを使ったシステムが 「低速な」システムよりも必ず
         しも速いとは限りません.
	 それぞれの場合の違いを以下の表に示します.
       <p>
       <tscreen><verb>
	CPUクロック  外部クロック  外部クロックと  PCIバス
	             とメモリバス  内部クロック    クロック
	 MHZ          MHZ**        の比            MHZ
        
	 60	      60	    1.0		   30
	 66	      66	    1.0		   33
	 75	      50	    1.5		   25
	 90	      60	    1.5		   30
	100	      50*	    2  		   25
	100	      66	    1.5		   33
	120	      60	    2  		   30
	133	      66	    2  		   33
	150	      60	    2.5		   30
	166	      66	    2.5		   33
	180	      60	    3  		   30
	200	      66	    3  		   33

         *  Pentium 100 は 50MHzの外部クロックの 2倍または
	  66MHz の 1.5倍の両方で動かすことができます.
         ** 66 Mhz はおそらく実際には 66.667 MHzでしょう. 
	 しかし, そうだと決めつけてはいけません.
       </verb></tscreen>
       <p>3倍クロックの CPUではメモリアクセス速度が不足気味であるとい
         う点を考えなければ 100, 133, 166, 200 MHzを使うのが最良でしょ
	 う.
  <sect2><heading>* 486 クラス</heading>
  <sect2><heading>* 386 クラス</heading>
  <sect2><heading>286 クラス</heading>
    <p>FreeBSDは 80286マシンでは動きません. 現在の巨大なフ
       ルスペックの UNIXをこのようなハードウェアで動かすことはほとんど
       不可能でしょう.

<sect1><heading>メモリ</heading>
  <p>FreeBSDをインストールするのに最低限必要なメモリ量は 5 MBです.
    いったんシステムが起動して<ref id="kernelconfig:building"
    name="カスタムカーネルを作る">ことができるならば, もっと少ないメモリ
    で動かすこともできます. boot4.flp を使えば 4 MB しかメモリがなく
    てもインストールできます.

<sect1><heading>* BIOS</heading>

<sect><heading>入力/出力デバイス<label id="hw:io"></heading>

<sect1><heading>* ビデオカード</heading>
<sect1><heading>* サウンドカード</heading>
<sect1><heading>シリアルポートとマルチポートカード</heading>

        &uart;
        &sio;
        &cy;

<sect1><heading>* パラレルカード</heading>
<sect1><heading>* モデム</heading>
<sect1><heading>* ネットワークカード</heading>
<sect1><heading>* キーボード</heading>
<sect1><heading>* マウス</heading>
<sect1><heading>* その他</heading>

<sect><heading>記憶装置<label id="hw:storage"></heading>
&esdi;
&scsi;

<sect1><heading>* ディスク/テープ コントローラ
        <label id="hw:storage:controllers"></heading>
  <sect2><heading>* SCSI</heading>
  <sect2><heading>* IDE</heading>
  <sect2><heading>* フロッピー</heading>

<sect1><heading>* ハードディスクドライブ</heading>
<sect1><heading> テープドライブ</heading>
          <p><em>原作: &a.jmb;.<newline>2 July 1996.</em></p>
          <p><em>訳: &a.yoshiaki;.<newline>13 October 1996.</em></p>

  <sect2><heading> 一般的なテープアクセスコマンド</heading>
        <p><tt>mt(1)</tt> はテープドライブへの一般的なアクセス方法を提
        供します. <tt>rewind</tt>, <tt>erase</tt>, <tt>status</tt>など
        の共通コマンドがあります. マニュアルページの <tt>mt(1)</tt>を見
        てください. より詳しい解説があります.

  <sect2><heading> コントローラインタフェース</heading>
        <p>テープドライブにはいくつかの異なったインタフェースがあり
        ます. SCSI, IDE, フロッピー, パラレルポートのインタフェース
        です.  非常に多くの種類のテープドライブがこれらのインタフェー
        スで使えます.  コントローラについての議論は<ref
        id="hw:storage:controllers" name="ディスク/テープ のコントロー
        ラ ">にあります(訳注:現在未完成です).

  <sect2><heading> SCSI ドライブ</heading>
       <p><tt>st(4)</tt> ドライバは 8mm (Exabyte), 4mm (DAT: Digital
       Audio Tape), QIC (1/4インチカートリッジ), DLT (デジタルリニアテー
       プ), QIC ミニカートリッジ, 9トラック (大きなリールがハリウッドの
       コンピュータルームで回っているのを見たことがあるでしょう)をサポー
        トします.
       <tt>st(4)</tt> マニュアルページにより詳しい解説があります.

        <p>以下のドライブリストは現在 FreeBSDコミュニティのメンバが
        使っているものです. これらだけが FreeBSDで動くドライブという
        わけではありません. これらは単にたまたま私たちのうちの誰かが使っ
        ているというだけです.

     <sect3><heading> 4mm (DAT: Digital Audio Tape )</heading>
        <p><ref id="hw:storage:python" name="Archive Python"
        <p><ref id="hw:storage:hp1533a" name="HP C1533A">
        <p><ref id="hw:storage:hp1534a" name="HP C1534A">
        <p><ref id="hw:storage:hp35450a" name="HP 35450A">
        <p><ref id="hw:storage:hp35470a" name="HP 35470A">
        <p><ref id="hw:storage:hp35480a" name="HP 35480A">
        <p><ref id="hw:storage:sdt5000"  name="SDT-5000">
        <p><ref id="hw:storage:wangtek6200" name="Wangtek 6200"

     <sect3><heading> 8mm (Exabyte)</heading>
        <p><ref id="hw:storage:exb8200" name="EXB-8200">
        <p><ref id="hw:storage:exb8500" name="EXB-8500">
        <p><ref id="hw:storage:exb8505" name="EXB-8505">

     <sect3><heading> QIC (1/4 インチカートリッジ)</heading>
        <p><ref id="hw:storage:anaconda" name="Archive Ananconda 2750"
        <p><ref id="hw:storage:viper60" name="Archive Viper 60"
        <p><ref id="hw:storage:viper150" name="Archive Viper 150"
        <p><ref id="hw:storage:viper2525" name="Archive Viper 2525"
        <p><ref id="hw:storage:tandberg3600" name="Tandberg TDC 3600"
        <p><ref id="hw:storage:tandberg3620" name="Tandberg TDC 3620"
        <p><ref id="hw:storage:tandberg4222" name="Tandberg TDC 4222"
        <p><ref id="hw:storage:wangtek5525es" name="Wangtek 5525ES"
     <sect3><heading> DLT (Digital Linear Tape)</heading>
        <p><ref id="hw:storage:dectz87" name="Digital TZ87"
     <sect3><heading> Mini-Cartridge</heading>
        <p><ref id="hw:storage:ctms3200" name="Conner CTMS 3200"
        <p><ref id="hw:storage:exb2501" name="Exabyte 2501"
     <sect3><heading> Autoloaders/Changers</heading>
        <p><ref id="hw:storage:hp1553a" name="Hewlett-Packard HP
C1553A Autoloading DDS2">
        
  <sect2><heading>* IDE ドライブ</heading>
  <sect2><heading> フロッピードライブ</heading>
        <p><ref id="hw:storage:conner420r" name="Conner 420R"
  <sect2><heading>* パラレルポートドライブ</heading>
  <sect2><heading> 詳細な情報 </heading>

        <sect3><heading><label id="hw:storage:anaconda">
Archive Ananconda 2750</heading>
        <p>このドライブのブートメッセージの識別子は "ARCHIVE
ANCDA 2750 28077 -003 type 1 removable SCSI 2"です.
        <p>これは QIC テープドライブです.
        <p>QIC-1350テープを利用した場合の標準の容量は 1.35GBです.
このドライブは QIC-150 (DC6150), QIC-250 (DC6250), QIC-525 (DC6525) の
テープを問題なく読み書きすることができます.
        <p><tt>dump(8)</tt>を使った時のデータ転送レートは 350kB/sです.
	<ref id="hw:storage:amanda" name="Amanda">における転送レートは 
530kB/sと報告されています.
	<p>このドライブは既に生産中止になっています.
        <p>このテープドライブの SCSIバスコントローラは他のほとんどの
 SCSIドライブとピン配置が逆です. Anaconda テープドライブの前後でSCSIケー
ブルを1/2ひねることができるくらいSCSIケーブルが長いことを確認しておく
か, 他の SCSIデバイスのピン配置を入れ換えておく必要
があります.
        <p>そして, このドライブではカーネルコードの変更が 2箇所必要です. そ
のままではうまく動かないでしょう.
	<p>SCSI-2コントローラを持っているなら, ジャンパの 6番をショート
してください. そうしないとこのドライブは SCSI-1として働きます. SCSI-1の
デバイスとして動作する時, このドライブはテープのfsf (早送り), rewind (巻
戻し),rewoffl (巻戻してオフラインにする) 等を含む操作を行っている間,
SCSIバスをロックします.
	<p>NCR SCSIコントローラを使う場合, /usr/src/sys/pci/ncr.c (以
下を参照してください)にパッチを行って, カーネルを作り直し, 新しいカーネ
ルをインストールしてください.

<tscreen><verb>
*** 4831,4835 ****
                };

!               if (np->latetime>4) {
                        /*
                        **      Although we tried to wake it up,
--- 4831,4836 ----
                };

!               if (np->latetime>1200) {
                        /*
                        **      Although we tried to wake it up,

</verb></tscreen>
        <p>報告者: &a.jmb;


        <sect3><heading><label id="hw:storage:python">
Archive Python</heading>
        <p>このドライブのブートメッセージの識別子は "ARCHIVE
Python 28454-XXX4ASB" "type 1 removable SCSI 2" "density code
0x8c, 512-byte blocks" です.
        <p>これは DDS-1 テープドライブです.
        <p>90m テープを使った場合の標準容量は 2.5GBです.
        <p>データ転送速度は不明です.
        <p>このドライブは Sun マイクロシステムが再パッケージして model
	411として出しています.
        <p>報告者: Bob Bishop rb@gid.co.uk

        <sect3><heading><label id="hw:storage:viper60">
Archive Viper 60</heading>
        <p>このドライブのブートメッセージ識別子は "ARCHIVE
VIPER 60 21116 -007" "type 1 removable SCSI 1"です.
        <p>これは QICテープドライブです.
        <p>標準の容量は 60MB です.
        <p>データ転送レートは不明です.
        <p>このドライブは生産中止になっています.
        <p>報告者: Philippe Regnauld regnauld@hsc.fr

        <sect3><heading><label id="hw:storage:viper150">
Archive Viper 150</heading>
        <p>このドライブのブートメッセージの識別子は "ARCHIVE
VIPER 150 21531 -004" "Archive Viper 150 is a known rogue" "type
1 removable SCSI 1"です.  このドライブのファームウェアには多くのリビジョ
ンがあります. あなたのドライブではことなった数字が表示されるかもしれま
せん(例えば "21247 -005").
        <p>これは QICテープドライブです.
        <p>標準容量は 150/250MBです.  150MB (DC6150) テープと
 250MB (DC6250)テープの記録フォーマットがあります.  250MBテープは
およそ67% 150MBテープより長いです.  このドライブは 120MBのテープを問題
なく読むことができます. 120MBテープに書き込むことはできません.
        <p>データ転送レートは100kB/sです.
        <p>このドライブは DC6150 (150MB) と DC6250 (250MB) テープの読み
書きができます.
        <p>このドライブの奇妙な癖は SCSIテープデバイスドライバはあら
かじめ (<tt>st(4)</tt>) にあらかじめ組み込まれています.
        <p>FreeBSD 2.2-currentでは, ブロックサイズの設定を設定するため<tt>mt
blocksize 512</tt>としてください.  (ファームウェアリビジョンが
21247 -005 である場合の問題です. 他のリビジョンのファームウェアでは異
なる場合があります.) これ以前の FreeBSDバージョンにはこの問題はありません.
        <p>このドライブは生産中止になっています.
        <p>報告者: Pedro A M Vazquez vazquez@IQM.Unicamp.BR
        <p>        Mike Smith msmith@atrad.adelaide.edu.au

        <sect3><heading><label id="hw:storage:viper2525">
Archive Viper 2525</heading>
        <p>このドライブのブートメッセージの識別子は "ARCHIVE
VIPER 2525 25462 -011" "type 1 removable SCSI 1"です.
        <p>これは QICテープドライブです.
        <p>標準容量は 525MBです.
        <p>データ転送レートは 90inch/secの場合で 180kB/sです. 
        <p>QIC-525, QIC-150, QIC-120, QIC-24のテープを読むことができま
す. QIC-525, QIC-150, QIC-120 に書き込むことができます.
        <p>ファームウェアのリビジョンが "25462 -011" 以前の物はバグが
多く, 正しく機能しません.
        <p>このドライブは生産中止になっています.
        <p>報告者: &a.hm;

        <sect3><heading><label id="hw:storage:conner420r">
Conner 420R</heading>
        <p>このドライブのブートメッセージの識別子は "Conner tape" です.
        <p>これはフロッピーコントローラを使うミニカートリッジテープド
ライブです.
        <p>標準容量は不明です.
        <p>データ転送レートは不明です.
        <p>このドライブは QIC-80テープドライブを使います.
        <p>報告者: Mark Hannon mark@seeware.DIALix.oz.au

        <sect3><heading><label id="hw:storage:ctms3200">
Conner CTMS 3200</heading>
        <p>このドライブのブートメッセージの識別子は "CONNER
CTMS  3200 7.00" "type 1 removable SCSI 2" です.
        <p>これはミニカートリッジテープドライブです.
        <p>標準容量は不明です.
        <p>データ転送レートは不明です.
        <p>このドライブは QIC-3080テープカートリッジを使います.
        <p>報告者: Thomas S. Traylor tst@titan.cs.mci.com

        <sect3><heading><label id="hw:storage:dectz87">
        <htmlurl
url="http://www.digital.com/info/Customer-Update/931206004.txt.html"
name="DEC TZ87"></heading>
        <p>このドライブのブートメッセージの識別子は "DEC
TZ87 (C) DEC 9206" "type 1 removable SCSI 2" "density code 0x19" です.
        <p>これは DLTテープドライブです.
        <p>標準容量は 10GBです.
        <p>このドライブはハードウェアデータ圧縮の機能があります.
        <p>データ転送レートは 1.2MB/sです.
        <p>このドライブは Quantum DLT2000と同一の物です.  このドライブ
のファームウェアは Exabyteの 8mmドライブ等のよく知られたいくつかのドラ
イブのエミュレートをおこなうよう設定ができます.
        <p>報告者: &a.wilko;

        <sect3><heading><label id="hw:storage:exb2501">
        <htmlurl
url="http://www.Exabyte.COM:80/Products/Minicartridge/2501/Rfeatures.html"
name="Exabyte EXB-2501"></heading>
        <p>このドライブのブートメッセージ識別子は "EXABYTE
EXB-2501"です.
        <p>これはミニカートリッジテープドライブです.
        <p>MC3000XLミニカートリッジを使った時の標準容量は 1GBです.
        <p>データ転送レートは不明です.
        <p>このドライブは DC2300 (550MB), DC2750 (750MB), MC3000
(750MB), MC3000XL (1GB) ミニカートリッジの読み書きができます.
        <p>注意: このドライブは SCSI-2の仕様に適合していません.
このドライブは, フォーマット済みのテープ以外を入れた場合, SCSI
MODE_SELCTコマンドで完全にロックアップしてしまいます. このドライブを使
う前に, テープブロックサイズを次のように設定します.

        <verb>mt -f /dev/st0ctl.0 blocksize 1024</verb>

ミニカートリッジは最初に使う前にフォーマットしなければなりません.
FreeBSD 2.1.0-RELEASE およびそれ以前の場合は

        <verb>/sbin/scsi -f /dev/rst0.ctl -s 600 -c "4 0 0 0 0 0"</verb>

(あるいは, FreeBSD 2.1.5/2.2から <tt>scsiformat</tt>シェルスクリプトを
コピーして持ってきた場合と) FreeBSD 2.1.5およびそれ以降の場合は

        <verb>/sbin/scsiformat -q -w /dev/rst0.ctl</verb>

とします.
        <p>今のところ, FreeBSDではこのドライブはあまりおすすめできません.
        <p>報告者: Bob Beaulieu ez@eztravel.com

        <sect3><heading><label id="hw:storage:exb8200"> Exabyte
EXB-8200</heading>
        <p>このドライブのブートメッセージの識別子は "EXABYTE
EXB-8200 252X" "type 1 removable SCSI 1"です.
        <p>これは8mmテープドライブです.
        <p>標準容量は 2.3GBです.
        <p>データ転送レートは 270kB/sです.
        <p>このドライブはブート時の SCSIバスへの応答はわりあい遅いです.
カスタムカーネルが必要かもしれません (SCSI_DELAYを 10秒に設定しましょう).
訳注: GENERICカーネルの設定では 15秒になっています.
        <p>このドライブには非常に多くのファームウェアの構成があります.
あるドライブでは特定のベンダのハードウェアにカスタマイズしてあります.
ファームウェアは EPROMを置き換えることで変更できます.
        <p>このドライブは生産中止になっています.
        <p>報告者: Mike Smith msmith@atrad.adelaide.edu.au

        <sect3><heading><label id="hw:storage:exb8500">
Exabyte EXB-8500</heading>
        <p>このドライブのブートメッセージの識別子は "EXABYTE
EXB-8500-85Qanx0 0415" "type 1 removable SCSI 2" です.
        <p>これは 8mmテープドライブです.
        <p>標準容量は 5GBです.
        <p>データ転送レートは 300kB/sです.
        <p>報告者: Greg Lehey grog@lemis.de

        <sect3><heading><label id="hw:storage:exb8505">
        <htmlurl
url="http://www.Exabyte.COM:80/Products/8mm/8505XL/Rfeatures.html"
name="Exabyte EXB-8505"></Heading>
        <p>このドライブのブートメッセージ識別子は "EXABYTE
EXB-85058SQANXR1 05B0" "type 1 removable SCSI 2"です.
        <p>これは 圧縮機能を持った 8mmテープドライブで, EXB-5200 と 
	EXB-8500に対する上位互換品です.
        <p>標準容量は 5GBです.
        <p>このドライブはハードウェアデータ圧縮機能があります.
        <p>データ転送レートは 300kB/sです.
        <p>報告者: Glen Foster gfoster@gfoster.com

        <sect3><heading><label id="hw:storage:hp1533a">
Hewlett-Packard HP C1533A</heading>
        <p>このドライブのブートメッセージの識別子は "HP
C1533A 9503" "type 1 removable SCSI 2"です.
        <p>これはDDS-2テープドライブです.  DDS-2 とはデータ容量を増や
すためにハードウェア圧縮と狭いトラックを採用したものです.
        <p>120mテープを使った場合の標準容量は4GBです.  このドライブは
ハードウェアデータ圧縮機能があります.
        <p>データ転送レートは510kB/sです.
        <p>このドライブはヒューレットパッカード社の6000eUおよび6000iテー
プドライブ, C1533A DDS-2 DAT ドライブに使われています.
        <p>このドライブは 8接点のディップスイッチがあります. FreeBSDで
の適切な設定は 1 ON; 2 ON; 3 OFF; 4 ON; 5 ON; 6 ON; 7 ON; 8 ON です. 
<tscreen><verb>
スイッチ 1       2      結果
        ON      ON      電源投入時に圧縮ON, ホストによるコントロール可能
        ON      OFF     電源投入時に圧縮ON, ホストによるコントロール不可
        OFF     ON      電源投入時に圧縮OFF, ホストによるコントロール可能
        OFF     OFF     電源投入時に圧縮OFF, ホストによるコントロール不可
</verb></tscreen>
        <p>スイッチ3は MRS (Media Recognition System :メディア認識システ
ム) をコントロールします.  MRS テープは透明なテープリーダ部分にしま模
様があります. これはテープが DDS (Digital Data Storage) グレードである
ことを示します. しま模様のないテープはライトプロテクトされたものとして
扱います. スイッチ3をOFFにすると MRSが有効になります. スイッチ3をONに
すると MRSは無効になります.

訳注: 安価な音楽用のDATテープを使うには MRSをOFFにしておきます

        <p><em>注意:</em> これらのドライブの品質管理は非常に幅がありま
す.  ある FreeBSDコアチームのメンバは このドライブを2つ返品しました.
        <p>報告者: &a.se;

        <sect3><heading><label id="hw:storage:hp1534a">
Hewlett-Packard HP 1534A</heading>
        <p>このドライブのブートメッセージの識別子は "HP
HP35470A T503" type 1 removable SCSI 2" "Sequential-Access
density code 0x13, variable blocks"です.
        <p>これは DDS-1テープドライブです.  DDS-1 は最初の DAT
テープフォーマットです.
        <p>90m テープを使った場合の標準容量は 2GBです.
        <p>データ転送レートは 183kB/sです.
        <p>ヒューレットパッカード社の
SureStore <htmlurl url="http://www.dmo.hp.com/tape/sst2000.htm"
name="2000i"> テープドライブ, C35470A DDS フォーマット DATドライブ, C1534A DDS
フォーマット DATドライブ, HP C1536A DDS フォーマット DATドライブと
同じ機構を使用しています.
        <p>HP C1534A DDSフォーマット DATドライブはグリーンと黄色(アンバー)
の2つの表示ランプがあります. グリーンのランプは動作状
態を示し, ローディング中はゆっくり点滅, ローディングが終了すると点灯,
read/write動作中は速く点滅します. 黄色のランプは警告灯で, クリーニング
が必要であるかまたはテープが寿命に近くなるとゆっくり点滅, 致命的なエラー
の場合は点灯します(工場での修理が必要かもしれません).
        <p>報告者:Gary Crutcher gcrutchr@nightflight.com

        <sect3><heading><label id="hw:storage:hp1553a">
Hewlett-Packard HP C1553A Autoloading DDS2</heading>
        <p>このドライブのブートメッセージの識別子は未確認です.
        <p>これは DDS-2テープドライブです. DDS-2 とはデータ容量を増や
すためにハードウェア圧縮と狭いトラックを採用したものです.
        <p>120mテープを使用した場合の標準容量は 24GB です. 
このドライブはハードウェアデータ圧縮機能があります.
        <p>データ転送レートは510kB/s (標準) です.
        <p>このドライブはヒューレットパッカード社の SureStore
<htmlurl url="http://www.dmo.hp.com/tape/sst12000.htm"
name="12000e">テープドライブに使われています.
        <p>このドライブはリアパネルに2つの選択スイッチがあります.
ファンに近いスイッチは SCSI IDです. もうひとつは 7に設定しておきます.
        <p>内部に 4個のスイッチがあります. これらは  1 ON; 2 ON; 3 ON;
4 OFF に設定しておきましょう.
        <p>現在のカーネルドライバはボリュームの終りで自動的にテープを
交換しません. ここに示す shellスクリプトでテープを交換できます.

<tscreen><verb>
#!/bin/sh
PATH="/sbin:/usr/sbin:/bin:/usr/bin"; export PATH

usage()
{
      echo "Usage: dds_changer [123456ne] raw-device-name
      echo "1..6 = Select cartridge"
      echo "next cartridge"
      echo "eject magazine"
      exit 2
}

if [ $# -ne 2 ] ; then
    usage
fi

cdb3=0
cdb4=0
cdb5=0

case $1 in
     [123456])
       cdb3=$1
       cdb4=1
       ;;
     n)
       ;;
     e)
       cdb5=0x80
       ;;
     ?)
       usage
       ;;
esac

scsi -f $2 -s 100 -c "1b 0 0 $cdb3 $cdb4 $cdb5"
</verb></tscreen>

        <sect3><heading><label id="hw:storage:hp35450a">
Hewlett-Packard HP 35450A</heading>
        <p>このドライブのブートメッセージの識別子は"HP
HP35450A -A C620" "type 1 removable SCSI 2" "Sequential-Access
density code 0x13" です.
        <p>これは DDS-1テープドライブです.  DDS-1 は最初の DAT
テープフォーマットです.
        <p>標準容量は 1.2GBです.
        <p>データ転送レートは 160kB/sです.
        <p>報告者: mark thompson mark.a.thompson@pobox.com

        <sect3><heading><label id="hw:storage:hp35470a">
Hewlett-Packard HP 35470A</heading>
        <p>このドライブのブートメッセージの識別子は "HP
HP35470A 9 09" type 1 removable SCSI 2"です.
        <p>これは DDS-1テープドライブです.  DDS-1は最初の DAT
テープフォーマットです.
        <p>90mテープを使用した時の標準容量は 2GBです.
        <p>データ転送レートは 183kB/sです.
        <p>これはヒューレットパッカード社の
SureStore <htmlurl url="http://www.dmo.hp.com/tape/sst2000.htm"
name="2000i"> テープドライブ, C35470A DDSフォーマットDATドライブ, C1534A
DDSフォーマットDATドライブ, HP C1536A DDS フォーマットDATドライブと同
じ機構が使われています.
        <p><em>注意:</em> これらのドライブの品質管理には非常に大き
な幅があります. ある FreeBSDコアチームのメンバは 5台のドライブを返品し
ました. 9ヶ月以上もったものはありません.
        <p>報告者: David Dawes dawes@rf900.physics.usyd.edu.au (9 09)

        <Sect3><heading><label id="hw:storage:hp35480a">
Hewlett-Packard HP 35480A</heading>
        <p>このドライブのブートメッセージの識別子は
"HP HP35480A 1009" "type 1 removable SCSI 2" "Sequential-Access
density code 0x13" です.
        <p>これは DDS-DCテープドライブです.  DDS-DCはハードウェアデータ
圧縮のついたDDS-1です. DDS-1は最初のDATテープフォーマットです.
        <p>90mテープを使った場合の標準容量は 2GBです.  このドライブはハー
ドウェア圧縮機能があります.
        <p>データ転送レートは 183kB/sです.
        <p>このドライブはヒューレットパッカード社の SureStore
<htmlurl url="http://www.dmo.hp.com/tape/sst5000.htm" name=
"5000eU"> , <htmlurl
url="http://www.dmo.hp.com/tape/sst5000.htm" name="5000i"> テープドラ
イブ,  C35480A DDS フォーマット DAT ドライブと同じ機構を使っています.
        <p>このドライブは時々, テープの eject操作 (<tt>mt offline</tt>)
を行っている時にハングアップすることがあります. テープをejectさせたり,
ドライブを回復させるにはフロントパネルのボタンを押してください.
        <p>注意: HP 35480-03110 では特有の問題がありました.
少なくとも2回, FreeBSD 2.1.0 で IBM Server 320に 2940W SCSIコントローラ
をつけてこのドライブを使っている時にすべての SCSIディスクのパーティショ
ンが失われたことがあります. この問題は解析も解決もできていません.
 
        <sect3><heading><label id="hw:storage:sdt5000">
        <htmlurl
url="http://www.sel.sony.com/SEL/ccpg/storage/tape/t5000.html"
name="Sony SDT-5000"</heading>
        <p>これらには少なくとも DDS-1のものと DDS-2のものの2つのモデルが
あります. DDS-1のものは "SDT-5000 3.02"です. DDS-2のものは "SONY
SDT-5000 327M" です. DDS-2バージョンには 1MBのキャッシュがあります. この
キャッシュによりあらゆる状況でテープのデータの流れを途切れさせません.
        <p>このドライブのブートメッセージの識別子は "SONY
SDT-5000 3.02" "type 1 removable SCSI 2" "Sequential-Access
density code 0x13"です.
        <p>120mテープを使用した場合の標準容量は 4GBです.  このドライブ
はハードウェアデータ圧縮機能があります.
        <p>データ転送レートはドライブのモデルによります.
	"SONY SDT-5000 327M" でデータ圧縮を行った場合のレートは 630kB/s 
です. "SONY SDT-5000 3.02"では 225kB/sです.
        <p>Kenneth Merry ken@ulc199.residence.gatech.eduの報告によれば
このドライブからデータを読むためには, ブロックサイズを 512バイトにしま
す (<tt>mt blocksize 512</tt>).
        <p>"SONY SDT-5000 327M" の情報は Charles Henrich
        henrich@msu.edu による報告です.
        <p>報告者: &a.jmz;

        <sect3><heading><label id="hw:storage:tandberg3600">
Tandberg TDC 3600</heading>
        <p>このドライブのブートメッセージの識別子は
"TANDBERG  TDC 3600 =08:" "type 1 removable SCSI 2"です.
        <p>このドライブはQIC テープドライブです.
        <p>標準容量は150/250MBです.
        <p>このドライブには奇妙な癖があることが知られていますが,
 SCSIテープドライバ (<tt>st(4)</tt>) には問題なく動くコードが含まれてい
ます. 問題の修整とSCSI 2へのコンパチビリティを得るためにファームウェ
アをある (具体的には不明の) バージョンより上にしてください. 
        <p>データ転送レートは80kB/sです.
        <p>IBMと Emerald製品のユニットは動かないでしょう.
問題を解決するためにファームウェア EPROMを交換してください.
        <p>報告者: Michael Smith msmith@atrad.adelaide.edu.au

        <sect3><heading><label id="hw:storage:tandberg3620">
Tandberg TDC 3620</heading>
        <p>これは<ref
         id="hw:storage:tandberg3600" name="Tandberg TDC 3600">ドライ
ブに非常によく似ています.
        <p>報告者: &a.joerg;

        <sect3><heading><label id="hw:storage:tandberg4222">
Tandberg TDC 4222</heading>
        <p>このドライブのブートメッセージの識別子は
"TANDBERG  TDC 4222 =07" "type 1 removable SCSI 2"です.
        <p>これは QICテープドライブです.
        <p>標準容量は2.5GBです. このドライブは 60M (DC600A) 以上のすべての
カートリッジを読むことができ, 150MB (DC6150) 以上のすべてのカートリッジを
読み書きできます. ハードウェア圧縮は 2.5GBカートリッジを使用した時のオプションとしてサポートされています.
        <p>このドライブには奇妙な癖がありますが, FreeBSDの2.2-current以降の
SCSIテープデバイスドライバ (<tt>st(4)</tt>) には対応が組み込まれています.
それ以前のバージョンの FreeBSDでは<tt>mt</tt>を用いてテープから1ブロッ
ク読み, テープを巻戻してからバックアッププログラムを実行してください.
(<tt>mt fsr 1; mt rewind; dump ...</tt>).
        <p>データ転送レートは 600kB/s (データ圧縮時のベンダによる公称)
	で, start/stop モードでも 350kB/s にはなります. 容量の小さいカー
	トリッジを使った場合にはレートは下がります. 
        <p>報告者: &a.joerg;

        <sect3><heading><label id="hw:storage:wangtek5525es">
Wangtek 5525ES</heading>
        <p>このドライブのブートメッセージの識別子は "WANGTEK
5525ES SCSI REV7 3R1" "type 1 removable SCSI 1" "density code 0x11, 1024-byte
blocks"です.
        <p>これは QICテープドライブです.
        <p>標準容量は 525MBです.
        <p>データ転送レートは 180kB/sです.
        <p>60, 120, 150, 525MB のテープを読むことができます.
60MB (DC600カートリッジ) には書き込むことはできません. 120および150テー
プに確実に上書きするには, 先にテープを消去 (<tt>mt erase</tt>) します.
120および 150のテープは 525MBのテープより幅の広いトラックを使用してい
ます(テープ当たりのトラック数は少なくなります).
トラックの幅の「外側」には上書きされませんので, テープが消去されない限り
両側に古いデータが残ったまま新しいデータが置かれることになります.
        <p>このドライブの奇妙な癖は知られていて, SCSIテープドライバ
	(<tt>st(4)</tt>) に組み込まれています.
        <p>他のファームウェアのリビジョンで動くことが確認されているも
	のは M75Dです.

        <p>報告者: Marc van Kempen marc@bowtie.nl  "REV73R1"
                        Andrew Gordon Andrew.Gordon@net-tel.co.uk "M75D"

        <sect3><heading><label id="hw:storage:wangtek6200">
Wangtek 6200</heading>
        <p>このドライブのブートメッセージの識別子は "WANGTEK
6200-HS 4B18" "type 1 removable SCSI 2" "Sequential-Access density
code 0x13"です.
        <p>これは DDS-1テープドライブです.
        <p>90mテープを使用した場合の標準容量は 2GBです.
        <p>データ転送レートは 150kB/sです.
        <p>報告者: Tony Kimball alk@Think.COM

  <sect2><heading>* 問題のあるドライブ </heading>

<sect1><heading>* CD-ROM ドライブ</heading>
<sect1><heading>* その他</heading>

<sect1><heading>* ディスクの追加と再設定</heading>
<sect1><heading> テープとバックアップ<label id="hw:storage:tapebackups"></heading>
  <sect2><heading>* フロッピーへのバックアップはいかが?</heading>
  <sect2><heading> テープメディア</heading>
     <sect3><heading><label id="hw:storage:tapebackups:4mm">
 4mm (DDS: Digital Data Storage)</heading>
<!--gen-->
        <p>4mm テープはワークステーションのバックアップメディアとして
QICから置き換えられつつあります. この流れは QICドライブの製造のリーダ
であった Archiveを Connerが買収し QICドライブの製造を中止したことで加
速しました. 4mmドライブは小型で静かですが 
8mmドライブの持っているような信頼性の評判はありません.
カートリッジは 8mmカートリッジよりも安価で小型 (3 x 2 x 0.5 インチ
; 76 x 51 x 12 mm) です. 4mmドライブ は 8mm同様にヘリカルスキャン (訳
注: VTRと同様の回転ヘッドを使う方式) を使用しているという理由でヘッド
の寿命は短いです.

<!--spec-->
        <p>これらのドライブのデータスループットは 150kB/s程度から
500kB/s程度の範囲です. データ容量は 1.3GBから 2.0GBです. ハードウェア
圧縮が多くのドライブで可能で, およそ 2倍の容量になります. マルチドライ
ブテープライブラリユニットは1つの筐体に 6ドライブを持つことができ自動的
にテープを交換します. ライブラリの容量は 240GBに達します.

<!--tech-->
        <p> 4mmドライブは 8mmドライブ同様にヘリカルスキャンを使います.
ヘリカルスキャンの利点と欠点は 4mmドライブ と 8mmドライブ共通です.

        <p>テープの寿命は 2000回のパスあるいは 100回のフルパックアップ
です.

     <sect3><heading><label id="hw:storage:tapebackups:8mm">
8mm (Exabyte)</heading>

<!--gen-->
        <p>8mmテープは SCSIテープドライブとして最もよく使われているもの
で, データ交換用として最良の選択です. ほとんどのサイトには Exabyteの 
2GB 8mmテープドライブがあるでしょう (訳注: Unixワークステーションを何
台も置いているようなサイトには1台くらいはあるというような意味です).
8mmドライブは信頼性が高く, 使いやすく, 静かです. カートリッジは安価で
小型です (4.8 x3.3 x 0.6 インチ; 122 x 84 x 15 mm). ひとつの欠点は
, テープとヘッドの相対的な速度が高速なために比較的ヘッドとテープの寿命
が短いことです.

<!--spec-->
        <p>データスループットは 250kB/s程度から 500kB/s程度の範囲です.
データ容量は 300MBから 7GBです. ハードウェア圧縮が多くのドライブで可
能で,およそ 2倍の容量になります. 単一のユニットおよび,1つの筐体に6台の
ドライブと 120巻のテープを持ったマルチドライブテープライブラリが利用可
能です. テープはユニットにより自動的に交換されます. ライブラリの容量は 
840GB以上に達します.

<!--tech-->
        <p>データはヘッドがメディアに対してある傾き (約6度) を持って配置
されているヘッドによるヘリカルスキャンを使ってテープに記録されます. テープは
ヘッドのある円筒の周の 270度にわたって接触します. テープが円筒面を走行
する間, 円筒は回転しています. この結果, トラックはテープの上端と下端の間に
角度を持って横切り, データは高密度に詰められることになります.

     <sect3><heading><label id="hw:storage:tapebackups:qic">
QIC</heading>
<!--gen-->
        <p>QIC-150テープとドライブはたぶん最も一般的に使われているドライブとメ
ディアでしょう。QICテープドライブは現実的なバックアップドライブとして
少なくとも高価なものではありません. 欠点はメディアのコストです. QICテー
プは 8mmや 4mmテープに比較して GBのデータの保存には5倍ほど高価です. 
しかしあなたの必要とする量が半ダース程のテープで十分であれば, QICは正
しい選択となるかもしれません. QICは <em>最も</em>一般的なテープドライ
ブです. すべてのサイトに QICドライブのどれかの容量のものがあります.
問題は, QICは同じようなテープ (まったく同じ場合もある) に多様な記録密度
があることです. QICドライブは静かではありません. これらのドライブはデー
タ記録を開始する前に音をたててシークしますし, リード, ライト, シークの
時にはっきりと聞こえる音を出します.
 QICテープの大きさは (6 x 4 x 0.7 インチ;
152 x 102 x 17 mm). <ref id="hw:storage:tapebackups:mini"
name="ミニカートリッジ"> で使われている 1/4インチ幅のテープについては別に
議論します. テープライブラリやチェンジャはありません.

<!--spec-->
        <p>データスループットは 150kB/sから 500kB/sの範囲です. データ容量
の範囲は 40MBから 15GBです. ハードウェア圧縮が最近の多くのドライブで使
えるようになっています. QICドライブは DATドライブに置き換えられつつあ
り,あまり多くインストールされなくなっています.

<!--tech-->
        <p>データは複数のトラックにわかれてテープに記録されます. 
トラックはテープメディアの長さ方向に沿っていて, 一端からもう一方の端ま
でです. トラックの
数とそれにしたがうトラックの幅はテープの容量によって変わります. すべてではあ
りませんがほとんどの最近のドライブは少なくとも読み出しについては (場合
によっては書き込みも) 下位互換性があります.  QICはデータの安全性につ
いてはよいといわれています (ヘリカルスキャンドライブに比べて機構は単純
でより丈夫です).

        <p>テープは 5000回のバックアップで寿命となるでしょう.

     <sect3><heading><label id="hw:storage:tapebackups:mini">
* ミニカートリッジ</heading>

     <sect3><heading><label id="hw:storage:tapebackups:dlt">
DLT</heading>
<!--gen-->
        <p>DLTはここに示したドライブのタイプの中で最高速のデータ転送レー
トです. 1/2インチ (12.5mm) テープが単リールのカートリッジ (4 x 4 x 1 イン
チ; 100 x 100 x 25 mm) に入っています. カートリッジのひとつの側面全体が 
スイングゲートになっています. ドライブの機構がこのゲートを開け, テープ
リーダを引き出します.  テープリーダには楕円形の穴があり, ドライブ
がテープを引っ掛けるのに使います. 巻き取りのためのリールはドライブの中
にあります. ここに挙げた他のカートリッジはすべて (9トラックテープはただ
1つの例外です) 送りだしリールと巻き取りリールの両方がカートリッジの中
にあります.

<!--spec-->
        データスループットは約1.5MB/sで, 4mm, 8mm, QIC テープドライブ
の3倍です. データ容量は単一のドライブで 10GBから 20GBの範囲です.
マルチテープチェンジャ,マルチテープドライブ,5から 900巻のテープを1から
20ドライブで扱うマルチドライブテープライブラリがあり, 50GBから 9TBの容量が得
られます.

<!--tech-->
        データは (QICテープのように) テープの走行方向に並列なトラックに
記録されます. 2つのトラックが同時に書かれます. Read/Writeヘッドの寿命
は比較的長いと言えます. テープの走行が止まればヘッドとテープの間の相対
運動はありません.

  <sect2><heading> 新品のテープを最初に使う場合</heading>
        <p>新品の完全な空テープを読もうとしたり書き込もうとすると処理
は失敗するでしょう. 次のようなコンソールメッセージが出るでしょう.
<tscreen><verb>
        st0(ncr1:4:0): NOT READY asc:4,1
        st0(ncr1:4:0):  Logical unit is in process of becoming ready
</verb></tscreen>

テープに識別ブロック (Identifire Block:block number 0) がありません.
QIC-525標準の採用されている QICテープドライブのすべてで識別ブロックをテー
プに書きます. 2つの解決方法があります.

        <p>(訳注: 方法1)<tt>mt fsf 1</tt> によってテープドライブは識別
	ブロックをテープに書きます.

        <p>(訳注: 方法2)フロントパネルのボタンを押してテープをとりだします.
        <p>再びテープを入れ,データをテープに <tt>dump(8)</tt>します.
        <p><tt>dump(8)</tt> はそのうちに <tt>DUMP: End of tape
detected</tt> と表示し, コンソールには <tt>HARDWARE FAILURE
info:280 asc:80,96</tt>と表示されるでしょう.
        <p> <tt>mt rewind</tt>を使ってテープを巻戻します.
        <p>この次からはテープの操作は成功するでしょう.

  <sect2><heading>バックアッププログラム</heading>
        <p>よく使われる3つのプログラムは<tt>dump(8)</tt>,
<tt>tar(1)</tt>, <tt>cpio(1)</tt>です.

     <sect3><heading> ダンプとリストア</heading>
<!--gen-->
        <p><tt>dump(8)</tt> と <tt>restore(8)</tt> は伝統的な Unixのバッ
クアッププログラムです. これらはドライブのファイルシステムによって作ら
れたファイル,リンク,ディレクトリをディスクブロックの集まりとして処理し
ます. <tt>dump(8)</tt>はデバイスやファイルシステム全体をバックアップし, 
一部分のバックアップや, <tt>ln(1)</tt>によるソフトリンクや他のファイル
システムをマウントを行った, 1つ以上のファイルシステムにまたがるディレ
クトリツリーのバックアップはできません.
<tt>dump(8)</tt>はファイルやディレクトリを構成するデータブロックをテー
プに書くだけで, ファイルやディレクトリをテープに書くことはありません.
<tt>dump(8)</tt>には初期の ATT UNIXのバージョン 6 (1975年ごろ) に由来する
癖が残っています. デフォルトのパラメタは 9トラックテープ (6250 bpi) に
適したものになっていて現在の高密度メディア (最大 62,182 ftpi) に適してい
ません. 現在のテープドライブの容量を有効に利用するため, デフォルト値を
コマンドラインで置き換えなければなりません.

        <p><tt>rdump(8)</tt> と <tt>rrestore(8)</tt> は他のコンピュー
タに接続されているテープドライブにネットワーク経由でバックアップをしま
す.どちらのプログラムもリモートテープドライブにアクセスするために
<tt>rcmd(3)</tt>と <tt>ruserok(3)</tt>に依存しています. このためユーザ
がバックアップを実行するためには <tt>rhosts</tt>によるリモートアクセス
が必要です. <p><tt>rdump(8)</tt> と <tt>rrestore(8)</tt>の引数はリモー
トコンピュータに適切なものを用います.

<tt>rrestore(8)</tt>はリモートコンピュータから使うのに適しています.
(例えば FreeBSDコンピュータより komodoという名前の Sunに接続されている
Exabyteテープドライブへ 
<tt>/sbin/rdump
0dsbfu 54000 13000 126 komodo:/dev/nrst8 /dev/rsd0a 2>&amp;1</tt>
として <tt>rdump</tt>したような場合の restoreに使います)
警告: セキュリティは <tt>rhosts</tt>の管理にかかっています.
あなたの状況を注意深く調べてください.

     <sect3><heading> Tar</heading>
<!--gen-->
        <p><tt>tar(1)</tt> ATT Unix のバージョン 6 (1975ごろ) にさかのぼ
る事ができます. <tt>tar(1)</tt>はファイルシステムと協調して機能し, ファ
イルやディレクトリをテープに書きます. <tt>tar(1)</tt>は
<tt>cpio(1)</tt>で使えるようなフルレンジのオプションは持ちませんが 
<tt>cpio(1)</tt>で使うような奇妙なコマンドパイプラインは必要ありません.

        <p><tt>tar(1)</tt> はネットワーク経由のバックアップの機能はあ
りません. リモートテープドライブにはパイプラインと <tt>rsh(1)</tt>を使っ
て送る事ができます. (コマンド使用例はまだです)

     <sect3><heading> Cpio</heading>
<!--gen-->
        <p><tt>cpio(1)</tt> は本来の Unixファイルを磁気メディアへ移すた
めのプログラムです.  <tt>cpio(1)</tt>はバイトスワッピング, 多くの異な
るアーカイブフォーマットの書き込みのオプション(それ以外にも多数のオプ
ションがあります)がありパイプで他のプログラムにデータを渡す事もできま
す. この最後に挙げた特徴により, <tt>cpio(1)</tt>はインストールメディア
にとっては優れた選択です. <tt>cpio(1)</tt>は<tt>STDIN</tt>からの入力で
なければならず,ディレクトリツリーの探索やファイルリストについての機能
はありません. 
	<p><tt>cpio(1)</tt>はネットワーク経由のバックアップの機能はあ
りません. リモートテープドライブにはパイプラインと <tt>rsh(1)</tt>を使っ
て送る事ができます. (コマンド使用例はまだです)

     <sect3><heading><label id="hw:storage:amanda"><htmlurl
url="http://www.freebsd.org/ports/misc.html#amanda-2.2.6.5"
name="Amanda"></heading>
        <p>Amanda (Advanced Maryland Network Disk Archiver) は単一のプ
ログラムではなくクライアント/サーバ型のバックアップシステムです. Amanda サー
バは, Amandaクライアントであるネットワークでサーバに接続された複数のコン
ピュータから一つのテープドライブへバックアップをおこないます. 
このような場合の一般的な問題はいくつもの大容量のディスクからデータディ
レクトリをテープにバックアップするには時間がかかりすぎてしまうという事
です.  Amanda はこの問題を解決します. Amandaは同時に複数のファイルシス
テムのバックアップをおこなう時に 「ホールディングディスク」を使う事ができます.
Amandaの設定ファイルに書いたすべてのファイルシステムのフルバックアップを
ある間隔でとるためのテープグループである 「アーカイブセット」を作ります.
これは Amandaの設定ファイルに書かれているすべてのファイルシステムが, ある
期間で作られるフルバックアップのテープのグループです. 「アーカイブセッ
ト」には夜間に作られるすべてのファイルシステムの増分 (あるいは差分として
) のバックアップも含みます. 障害の起きたファイルシステムの回復に
は最も新しいフルバックアップと増分のバックアップが必要です.

        <p>設定ファイルでバックアップのコントロールと Amandaによるネッ
トワークトラフィック量を設定します. Amandaはデータをテープに書くのに
バックアッププログラムのどれかを使うでしょう. Amandaはその一部分でも
パッケージでも利用可能ですが, デフォルトではインストールされません. 

     <sect3><heading>何もしない</heading>
	<p>「何もしない」というのはコンピュータのプログラムではありませ
んが, バックアップの戦略として最も広く採用されている物です. これには初
期投資が必要ありません. したがわなければならないバックアップスケジュールも
ありません. ただ何もしないだけです. もしデータに何かが起きたら, 苦笑い
して耐えてください.

        <p>あなたにとって時間やデータの価値が少ないかあるいはまったくない
のであれば「何もしない」のはあなたのコンピュータに最も適したバックアッ
ププログラムでしょう. しかし注意してください. Unixは便利なツールです.
6ヶ月も使っていれば価値のあるファイルの山ができ上がっているでしょう.

	<p>「何もしない」は <tt>/usr/obj</tt> やその他の, コンピュータに
よってつくり出されたディレクトリツリーについては適切な方法です. 一つの
例はこのハンドブックのファイルで, これらは <tt>SGML</tt>のファイルより
生成された物です. <tt>HTML</tt>ファイルのバックアップを作る必要はあ
りません.  <tt>SGML</tt>のソースファイルは定期的にバックアップされます.

     <sect3><heading>どのバックアッププログラムが最適でしょう?</heading>
        <p><em>定期的に </em><tt>dump(8)</tt>しましょう. Elizabeth
D. Zwicky はここで検討したプログラムすべてについて拷問的なテストをおこないま
した.  すべてのデータと Unixファイルシステムの状態すべてを保存するには明ら
かに <tt>dump(8)</tt>でしょう.  Elizabethは大きく変化に富んだ異常な状態
(いくつかはあまり異常でもない状態のものもあります) になっているファイ
ルシステムで, それぞれのプログラムでファイルシステムのバックアップとリ
ストアを行ってテストしました. 特色のある状態には, ホールを持つファイル,
ホールとヌルブロックを持つファイル, 奇妙な文字をファイル名に持つファイ
ル, 読み出し不可, 書き込み不可のファイル, デバイスファイル, バックアッ
プ中にファイルのサイズを変更する, バックアップ中にファイルの作成/削除
をおこなうなどがあります. 彼女は1991年10月の LISA Vで結果の発表をしていま
す.

  <sect2><heading>緊急時のリストア手順</heading>
     <sect3><heading> 災難の起きる前に</heading>
        <p>起き得るどのような災難に対しても以下の4ステップだけが必要な
準備です.

        <p>ステップ 1では, ファイルシステムテーブル(<tt>/etc/fstab</tt>)
やブートメッセージで示されるすべてのディスクの disklabelをそれぞれ2コピー
づつプリント (<tt>例えば disklabel sd0 | lpr とする</tt>) します.

        <p>ステップ 2では, boot と fixitフロッピーにそのシステムのすべ
てのデバイスドライバが含まれているか確認します. 最も簡単な確認の方法は, フロッ
ピーをドライブに入れてリブートし, ブートメッセージを確認することです. あなた
のシステムのデバイスがすべて含まれ, 機能していれば, step 3へ飛んでください.

        <p>そうでないなら, そのシステムのすべてのディスクをマウントでき,
テープドライブにもアクセスできる 2種類のカスタムブートフロッピーディスクを作る必要
があります. これらのフロッピーには <tt>fdisk(8)</tt>,
<tt>disklabel(8)</tt>, <tt>newfs(8)</tt>, <tt>mount(8)</tt>, と利用したい
バックアッププログラムが入っていなければなりません. これらのプログラム
はスタティックリンクされたプログラムである必要があります.
<tt>dump(8)</tt>を使うのであればフロッピーに <tt>restore(8)</tt>を入れ
る必要があります. 

	<p>ステップ 3では, 通常の方法でバックアップを作ります. 
最新のバックアップの後でおこなわれた変更は回復することはできません. 
バックアップテープにライトプロテクトをしてください.

        <p>ステップ 4では, フロッピー (boot.flp と fixit.flp あるいは
ステップ 2で作った2枚のカスタムブートフロッピーディスクです) とバックアップテー
プのテストをします.
 手順のノートを作りましょう. このノートはブートフロッピーディスク,バックアッ
プテープに入れておきプリントアウトしておきます. あなたがリストアをおこなう
ような時はおそらく錯乱状態でしょうからこのノートはバックアップを破壊し
てしまうようなことを防ぐのに役立つでしょう (どのようにして破壊するって?
<tt>tar xvf /dev/rst0</tt>とする替りに偶然 <tt>tar cvf /dev/rst0</tt> 
とタイプしてバックアップテープに上書きしてしまうかもしれません).

訳注: 上書きはライトプロテクトをしておけば防げますが, なんらかの原因で
プロテクトがはずれているかもしれません.
ちなみに訳者の経験から言えば上のようなミスタイプは結構起きます.

        <p>安全性を増すために, 毎回ブートフロッピーディスクを作り,2巻のバック
アップテープを取ります. 一方を離れた場所に保管します. 離れた場所は同じ
建物の地下室ではいけません. 世界貿易センタービルにあった数多くの会社は
苦い経験よりこの教訓を得ました.  離れた場所とはコンピュータやディスク
ドライブからかなり離れていて物理的に分離されていなければなりません.

        <p>ブートフロッピーディスクを作るスクリプトの一例
<tscreen><verb>
 #!/bin/sh
 #
 # create a restore floppy	リストアフロッピーの作成
 # 
 # format the floppy		フロッピーのフォーマット
 #
 PATH=/bin:/sbin:/usr/sbin:/usr/bin

 fdformat -q fd0
 if [ $? -ne 0 ]
 then
         echo "Bad floppy, please use a new one"
         exit 1
 fi

 # place boot blocks on the floppy フロッピーにブートブロックを書く
 #
 disklabel -w -B -b /usr/mdec/fdboot -s /usr/mdec/bootfd /dev/rfd0c fd1440

 #
 # newfs the one and only partition	ただ1つのパーティションを newfs
 #
 newfs -t 2 -u 18 -l 1 -c 40 -i 5120 -m 5 -o space /dev/rfd0a

 #
 # mount the new floppy		新しいフロッピーをマウント
 #
 mount /dev/fd0a /mnt

 #
 # create required directories	必要なディレクトリの作成
 #
 mkdir /mnt/dev
 mkdir /mnt/bin
 mkdir /mnt/sbin
 mkdir /mnt/etc
 mkdir /mnt/root
 mkdir /mnt/mnt                 # for the root partition
 mkdir /mnt/tmp
 mkdir /mnt/var

 #
 # populate the directories
 #
 # 				MINIカーネルがない場合は作ります
 if [ ! -x /sys/compile/MINI/kernel ]
 then
         cat << EOM
 The MINI kernel does not exist, please create one.
 Here is an example config file:
 # 				MINIカーネルの config fileの例
 # MINI -- A kernel to get FreeBSD on onto a disk.
 #
 machine                "i386"
 cpu            "I486_CPU"
 ident          MINI
 maxusers       5

 options                INET                    # needed for _tcp _icmpstat _ip
stat
                                         #            _udpstat _tcpstat _udb
 options                FFS                     #Berkeley Fast File System
 options                FAT_CURSOR              #block cursor in syscons or pcc
ons
 options                SCSI_DELAY=15           #Be pessimistic about Joe SCSI
device
 options                NCONS=2                 #1 virtual consoles
 options                USERCONFIG              #Allow user configuration with
-c XXX

 config         kernel  root on sd0 swap on sd0 and sd1 dumps on sd0

 controller     isa0
 controller     pci0

 controller     fdc0    at isa? port "IO_FD1" bio irq 6 drq 2 vector fdintr
 disk           fd0     at fdc0 drive 0

 controller     ncr0

 controller     scbus0

 device         sc0     at isa? port "IO_KBD" tty irq 1 vector scintr
 device         npx0    at isa? port "IO_NPX" irq 13 vector npxintr

 device         sd0
 device         sd1
 device         sd2

 device         st0

 pseudo-device  loop            # required by INET
 pseudo-device  gzip            # Exec gzipped a.out's
 EOM
         exit 1
 fi

 cp -f /sys/compile/MINI/kernel /mnt

 gzip -c -best /sbin/init > /mnt/sbin/init
 gzip -c -best /sbin/fsck > /mnt/sbin/fsck
 gzip -c -best /sbin/mount > /mnt/sbin/mount
 gzip -c -best /sbin/halt > /mnt/sbin/halt
 gzip -c -best /sbin/restore > /mnt/sbin/restore

 gzip -c -best /bin/sh > /mnt/bin/sh
 gzip -c -best /bin/sync > /mnt/bin/sync

 cp /root/.profile /mnt/root

 cp -f /dev/MAKEDEV /mnt/dev
 chmod 755 /mnt/dev/MAKEDEV

 chmod 500 /mnt/sbin/init
 chmod 555 /mnt/sbin/fsck /mnt/sbin/mount /mnt/sbin/halt
 chmod 555 /mnt/bin/sh /mnt/bin/sync
 chmod 6555 /mnt/sbin/restore

 #
 # create the devices nodes	デバイスノードを作る
 #
 cd /mnt/dev
 ./MAKEDEV std
 ./MAKEDEV sd0
 ./MAKEDEV sd1
 ./MAKEDEV sd2
 ./MAKEDEV st0
 ./MAKEDEV pty0
 cd /

 #
 # create minimum filesystem table  最小限のファイルシステムテーブル
 #
 cat > /mnt/etc/fstab <<EOM
 /dev/fd0a      /       ufs     rw 1 1
 EOM

 #
 # create minimum passwd file	最小限のパスワードファイル
 #
 cat > /mnt/etc/passwd <<EOM
 root:*:0:0:Charlie &:/root:/bin/sh
 EOM

 cat > /mnt/etc/master.passwd <<EOM
 root::0:0::0:0:Charlie &:/root:/bin/sh
 EOM

 chmod 600 /mnt/etc/master.passwd
 chmod 644 /mnt/etc/passwd
 /usr/sbin/pwd_mkdb -d/mnt/etc /mnt/etc/master.passwd

 #
 # umount the floppy and inform the user	フロッピーを unmount
 #
 /sbin/umount /mnt
</verb></tscreen>

     <sect3><heading>災難の後に</heading>
        <p>重要な問題は, ハードウェアが生き残ったかどうかです.
定期的なバックアップを取っていればソフトウェアについて心配する必要はあ
りません.

        <p>ハードウェアがダメージを受けていたら, 最初にそのダメージを
受けた部品を交換してください.

        <p>ハードウェアに問題がなければ, フロッピーをチェックしてくださ
い.カスタムブートフロッピーディスクを使っているのであればシングルユーザ
("boot:"プロンプトの出た時に "-s" とタイプしてください) でブートしてくださ
い. それから次の「ファイルシステムを1つずつ回復する」を読んでください。

   <p>boot.flp と fixit.flp を使っているのであればこのまま読み続けてくださ
い. boot.flp を入れてブートしてください. 本来のインストールメニューが表
示されるはずです. (ここで) "fixit XXX"オプションを選びます. 指示の通り
fixit.flp を入れてください. <tt>restore</tt>とその他の必要なプログラムは
<tt>/mnt2/stand</tt>に置かれています.

        <p>ファイルシステムを一つずつ回復する

        <p>最初のディスクのrootパーティションを<tt>mount(8) (例えば mount
/dev/sd0a /mntのように) </tt>マウントして見てください. ディスクラベルが
破壊されている場合は <tt>disklabel(8)</tt>を使ってあらかじめプリントし
ておいた通りにパーティションを作り直しラベルをつけてセーブしてください.
<tt>newfs(8)</tt>を使いファイルシステムを作り直します. ルー
トパーティションを読み書き可能にマウント ("<tt>mount -u -o rw
/mnt</tt>") しなおします. バックアッププログラムとバックアップテープを
使ってこのファイルシステムのデータを回復します (例えば <tt>restore vrf
/dev/st0</tt>とします). ファイルシステムをアンマウント (<tt>umount 
/mnt</tt>など) して, 障害を受けたファイルシステムそれぞれについて繰り返
してください.

        <p>システムが動き出したら, 新しいテープにデータをバックアップ
してください. どのような理由で再び事故が起きたりデータが失われるかはわか
りません. これに時間を費す事で, 後々の災難から救われる事になります.

     <sect3><heading>* 災難対策をしていませんでした. どうしたらいいでしょ
う?</heading>
<sect1><heading>* シリアルポート</heading>
<sect1><heading>* サウンドカード</heading>
<sect1><heading>* PCMCIA</heading>
<sect1><heading>* その他<label id="hw:other"></heading>
