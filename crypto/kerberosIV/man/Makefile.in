# Makefile.in,v 1.2 1994/05/13 05:02:46 assar Exp

srcdir		= @srcdir@
VPATH		= @srcdir@

SHELL		= /bin/sh

INSTALL		= @INSTALL@
INSTALL_DATA	= @INSTALL_DATA@
MKINSTALLDIRS = @top_srcdir@/mkinstalldirs

prefix		= @prefix@
mandir		= @mandir@
transform=@program_transform_name@
EXECSUFFIX=@EXECSUFFIX@

MANRX = .*\.\([0-9]\)
CATRX = \(.*\)\.cat\([0-9]\)
CATSUFFIX=@CATSUFFIX@

MAN1 = afslog.1 kauth.1 ftp.1 kdestroy.1 kinit.1 kpasswd.1 \
	login.1 rlogin.1 su.1 kerberos.1 klist.1 ksrvtgt.1 pagsh.1 \
	rcp.1 rsh.1 telnet.1 kx.1 rxterm.1 rxtelnet.1 tenletxr.1 \
	des.1 movemail.1 \
	otp.1 otpprint.1

CAT1 = afslog.cat1 kauth.cat1 ftp.cat1 login.cat1 \
	pagsh.cat1 rcp.cat1 rlogin.cat1 rsh.cat1 su.cat1 telnet.cat1 kx.cat1 \
	rxterm.cat1 rxtelnet.cat1 tenletxr.cat1 movemail.cat1 \
	otp.cat1 otpprint.cat1

MAN3 =	acl_check.3 kafs.3 kerberos.3 krb_set_tkt_string.3 des_crypt.3 \
	krb_realmofhost.3 kuserok.3 getusershell.3 krb_sendauth.3 \
	tf_util.3

CAT3 =	getusershell.cat3 kafs.cat3

MAN5 =	krb.conf.5 krb.realms.5 krb.equiv.5 login.access.5 ftpusers.5

CAT5 =	login.access.cat5 krb.equiv.cat5 ftpusers.cat5

MAN8 =	ext_srvtab.8 kdb_destroy.8 kdb_util.8 ksrvutil.8 telnetd.8 rlogind.8 \
	kadmin.8 kdb_edit.8 kstash.8 kadmind.8 kdb_init.8 rshd.8 kauthd.8 \
	popper.8 kxd.8 kerberos.8

CAT8 =	ftpd.cat8 rshd.cat8 telnetd.cat8 ksrvutil.cat8 rlogind.cat8 \
	kauthd.cat8 kprop.cat8 kpropd.cat8 kxd.cat8 kerberos.cat8

all: 

cat: $(CAT1) $(CAT3) $(CAT5) $(CAT8)

%.cat1: %.1
	`grog -Tascii $<` > $@
%.cat3: %.3
	`grog -Tascii $<` > $@
%.cat5: %.5
	`grog -Tascii $<` > $@
%.cat8: %.8
	`grog -Tascii $<` > $@


Wall:

install: all
		for x in man1 man3 man5 man8 cat1 cat3 cat5 cat8; do \
			$(MKINSTALLDIRS) $(mandir)/$$x; done
		(cd $(srcdir); \
			for x in $(MAN1) $(MAN3) $(MAN5) $(MAN8); do \
				s=`echo $$x | sed 's!$(MANRX)!\1!'` ; \
				$(INSTALL_DATA) $$x $(mandir)/man$$s; done ;\
			for x in $(CAT1) $(CAT3) $(CAT5) $(CAT8); do \
				s=`echo $$x | sed 's!$(CATRX)!\2!'`; \
				b=`echo $$x | sed 's!$(CATRX)!\1!'`; \
			$(INSTALL_DATA) $$x $(mandir)/cat$$s/$$b.$(CATSUFFIX);\
			 done )

uninstall:
		for x in $(MAN1) $(MAN3) $(MAN5) $(MAN8); do \
			s=`echo $$x | sed 's!$(MANRX)!\1!'` ; \
			rm -f $(mandir)/man$$s/$$x; done
		for x in $(CAT1) $(CAT3) $(CAT5) $(CAT8); do \
			s=`echo $$x | sed 's!$(CATRX)!\2!'`; \
			b=`echo $$x | sed 's!$(CATRX)!\1!'`; \
			rm -f $(mandir)/cat$$s/$$b.$(CATSUFFIX); done

clean:

mostlyclean:	clean

distclean:
	rm -f Makefile *~

realclean:

