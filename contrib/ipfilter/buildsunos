#! /bin/sh
# $Id: buildsunos,v 2.0.2.4.2.1 1998/05/21 14:46:04 darrenr Exp $
:
rev=`uname -r | sed -e 's/^\([^\.]*\)\..*/\1/'`
cpu=`uname -m`
cpudir=${cpu}-`uname -r`
if [ $rev = 5 ] ; then
	solrev=`uname -r | sh -c 'IFS=. read j n x; echo $n'`
	mkdir -p SunOS5/${cpudir}
	/bin/rm -f SunOS5/${cpudir}/Makefile
	/bin/rm -f SunOS5/${cpudir}/Makefile.ipsend
	ln -s ../Makefile SunOS5/${cpudir}/Makefile
	ln -s ../Makefile.ipsend SunOS5/${cpudir}/Makefile.ipsend
fi
if [ $cpu = i86pc ] ; then
	make ${1+"$@"} sunos5x86 SOLARIS2="-DSOLARIS2=$solrev" CPU=${cpu} CPUDIR=${cpudir}
	exit $?
fi
if [ x$solrev = x ] ; then
	make ${1+"$@"} sunos$rev "ARCH=`uname -m`"
	exit $?
fi
make ${1+"$@"} sunos$rev SOLARIS2="-DSOLARIS2=$solrev" CPU=${cpu} CPUDIR=${cpudir}
exit $?
