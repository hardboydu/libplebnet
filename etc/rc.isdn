#!/bin/sh
#---------------------------------------------------------------------------
#
#	/etc/rc.isdn - isdn4bsd startup script
#	--------------------------------------
#
#	last edit-date: [Mon Mar  8 12:15:56 1999]
#
# $FreeBSD$
#
#---------------------------------------------------------------------------

if [ "${isdn_enable}" = "YES" ] ; then

	echo -n 'ISDN subsystem setup:'

	# terminal type for fullscreen mode, default to syscons driver
	isdn_ttype=cons25

	# check for pcvt driver (VT100/VT220 emulator)
	if [ -x /usr/sbin/ispcvt ] ; then
		if /usr/sbin/ispcvt ; then
			isdn_ttype=pcvt25
		fi
	fi
	
	if [ "${isdn_flags}" = "NO" ] ; then
		isdn_flags=""
	fi
	
	# start the isdn daemon
	if [ -x /usr/sbin/isdnd ] ; then
		echo -n ' isdnd'
		if [ "${isdn_fsdev}" = "NO" ] ; then
			/usr/sbin/isdnd ${isdn_flags} 
		else
			/usr/sbin/isdnd ${isdn_flags} -f -r ${isdn_fsdev} -t ${isdn_ttype}
		fi
	fi

	# start isdntrace	
	if [ "${isdn_trace}" = "YES" -a -x /usr/sbin/isdntrace ] ; then
		echo -n ' isdntrace'
		nohup /usr/sbin/isdntrace ${isdn_traceflags} >/dev/null 2>&1 &
	fi

	echo '.'
fi
