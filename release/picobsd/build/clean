#! /bin/sh -

#
#	$Id: clean,v 1.6 1998/09/29 11:58:54 abial Exp $
#
set -e

if [ $# -lt 1 ]
then
	echo "What to clean? Possible targets are 'dial', 'net', 'isp', 'router' or 'all'"
	exit 1
fi

if [ "$1" = "all" ]
then
	list="dial net isp router"
	if [ -f picobsd.bin ]
	then
		mv -f picobsd.bin picobsd.bin.old
	fi
else
	list=$1
	if [ -f picobsd.bin ]
	then
		mv -f picobsd.bin picobsd.bin.$1
	fi
fi

rm -f kernel kernel.kz fs.PICOBSD *.o *core *.db
cd ..
rm -rf help/tmp_hlp
echo "===================== $0 tools started ===================="
for i in `ls -d tinyware/[a-z]*` tools/write_mfs_in_kernel tools/dumpnlist
do
	(cd ${i}; \
	if [ -f Makefile ]; \
	then \
		 make clean && make cleandepend;\
	fi)
done
for j in $list
do
	echo "===================== $0 $j started ======================"
	(cd ${j}/crunch1; \
	if [ -f Makefile ]; \
	then \
		 make clean ; \
	fi)
	echo "=============== $0 $j completed successfuly =============="
done
