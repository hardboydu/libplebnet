#! /bin/sh -

#
#	$Id: clean,v 1.4 1998/09/07 19:00:14 abial Exp $
#
set -e

if [ $# -lt 1 ]
then
	echo "What to clean? Possible targets are 'dial', 'net', 'isp', 'router' or 'all'"
	exit 1
fi

if [ "$1" = "all" ]
then
	list="dial net isp router"
else
	list=$1
fi

rm -f kernel kernel.kz fs.PICOBSD picobsd.bin *.o *core *.db
rm -f picobsd.bin
cd ..
rm -f custom
rm -rf help/tmp_hlp
for j in $list
do
	echo "===================== $0 $j started ======================"
	for i in `ls -d tinyware/[a-z]*` tools/write_mfs_in_kernel tools/dumpnlist ${j}/crunch1
	do
		(cd ${i}; \
		if [ -f Makefile ]; \
		then \
			 make clean && make cleandepend;\
		fi)
	done

	echo "=============== $0 $j completed successfuly =============="
done
