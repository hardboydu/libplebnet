# $FreeBSD$
#
# Makefile for building PICOBSD kernels

SRC?=/usr/src
CONF?=$(SRC)/sys/i386/conf

CONFFILE=PICOBSD${suffix}
COMPILE=$(SRC)/sys/compile/$(CONFFILE)
KERNFILE=$(COMPILE)/kernel

all: $(KERNFILE)


${CONF}/${CONFFILE}: PICOBSD
	cp PICOBSD ${CONF}/${CONFFILE}
	cp PICOBSD.hints ${CONF}/${CONFFILE}.hints

${COMPILE}: ${CONF}/${CONFFILE}
	(cd ${CONF}; config ${CONFFILE}; cd ${COMPILE}; \
	make KERNEL=kernel -DNO_MODULES depend )

$(KERNFILE): ${COMPILE}
	(cd ${COMPILE}; \
	make KERNEL=kernel -DNO_MODULES)

