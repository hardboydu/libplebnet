# $FreeBSD$
#
# Makefile for building PICOBSD kernels

SRC?=/usr/src
OBJ?=/usr/obj
CONF?=$(SRC)/sys/i386/conf

CONFFILE=PICOBSD${suffix}
COMPILE=$(OBJ)/usr/src/sys/$(CONFFILE)
KERNFILE=$(COMPILE)/kernel

all: $(KERNFILE)


${CONF}/${CONFFILE}: PICOBSD
	cp PICOBSD ${CONF}/${CONFFILE}
	cp PICOBSD.hints ${CONF}/${CONFFILE}.hints

${COMPILE}: ${CONF}/${CONFFILE}

$(KERNFILE): ${COMPILE}
	(cd ${SRC}; \
	make buildkernel KERNEL=${CONFFILE} -DNO_MODULES)

