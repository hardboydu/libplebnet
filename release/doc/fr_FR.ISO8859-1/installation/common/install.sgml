<!--
     The FreeBSD Documentation Project
     The FreeBSD French Documentation Project

     $Id$
     $FreeBSD$
     Original revision: 1.14

     This file has architecture-dependent installation instructions, culled
from {alpha,i386}/INSTALL.TXT.

-->

<sect1>
  <title>***En cours de traduction***Installation de &os;</title>

  <para>Cette sections documente le processus pour l'installation 
  d'une nouvelle version de &os;. Ces instructions mettent un accent
  particulier sur la fa&ccedil;on d'obtenir la distribution &os;
  &release.current; de commencer la proc&eacute;dure d'installation. Le
  chapitre <ulink
  url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/install.html"><quote>Installation de &os;</quote></ulink> du <ulink url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">guide de r&eacute;f&eacute;rence de &os;</ulink> vous fournit plus d'informations sur le programme d'installation lui m&ecirc;me, et une explication pas &agrave; pas de l'installation ponctu&eacute;e de copies d'&eacute;crans</para>



  <para>Si vous effectuez une mise &agrave; jour depuis une version
  pr&eacute;cedente de &os;, r&eacute;f&eacute;rez vous aux, <xref
  linkend="upgrading">, instructions sur la mise &agrave; jour.</para>

  <sect2 id="getting-started">
    <title>Pour commencer</title>

    <para>Probablement l'&eacute;tape la plus importante avant
    l'installation de &os;, la lecture de la documentation fournie
    avec &os; est n&eacute;cessaire. Une liste des documents pertinents
    pour cette version de &os; peut &ecirc;tre trouv&eacute;e dans le fichier
    <filename>README.TXT</filename>, qui se trouve la plupart du temps
    au m&ecirc;me endroit que ce fichier; la plupart de ces documents,
    comme les notes de version et la liste de mat&eacute;riel compatible,
    sont aussi accessible dans le menu Documentation du programme
    d'installation. </para>

    <para>Notez que les versions en ligne de &os; <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/faq/">FAQ</ulink> et <ulink url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">Handbook</ulink> sont aussi disponibles sur le 
    <ulink url="http://www.FreeBSD.org/">site Web du projet
    FreeBSD</ulink>, si vous disposez d'une connection
    Internet.</para>

    <para>Cette liste de documents peut vous para&icirc;tre &eacute;norme,
    mais le temps pass&eacute; &agrave; les lire vous fera probablement gagner
    du temps par la suite. Savoir que ces ressources sont disponibles
    peut &ecirc;tre interessant lors de probl&egrave;mes au moment de
    l'installation.</para>

    <para>Si vous avez des probl&egrave;mes, voyez la <xref
    linkend="trouble">, qui contient certaines informations
    interessantes. Vous pouvez aussi lire une copie &agrave; jour du
    fichier <filename>ERRATA.TXT</filename> avant l'installation, qui
    vous alertera sur les probl&egrave;mes rencontr&eacute;s depuis la mise
    &agrave; jour d'une version particuli&egrave;re.</para>

    <important>
      <para>M&ecirc;me si &os; essaie de mettre le plus de garde-fou pour
      &eacute;viter de perdre des donn&eacute;es, il est plus que possible
      <emphasis> de perdre la totalit&eacute; de votre disque</emphasis>
      lors de l'installation si vous faites une erreur. Donc, ne
      validez pas la derni&egrave;re phase de l'installation de &os; tant
      que vous n'avez pas effectu&eacute; une sauvegarde de vos donn&eacute;es
      importantes.</para>
    </important>

  <sect2>
    <title>Mat&eacute;riel N&eacute;cessaire</title>

    <para arch="i386">&os; pour &arch.print; n&eacute;cessite une
    processeur 386 ou sup&eacute;rieur pour fonctionner (d&eacute;sol&eacute;,
    les processeurs 286 ne sont pas support&eacute;s) et au moins 5Mo de
    RAM pour l'installation et 4Mo de RAM par la suite. Voyez plus
    loin comment retailler des partitions DOS avant d'installer
    &os;.</para>

    <para arch="alpha">&os; pour &arch.print; supporte les plateformes
    d&eacute;crites dans le fichier <filename>HARDWARE.TXT</filename>.</para>

    <para arch="alpha">Vous devrez disposer d'un disque d&eacute;di&eacute;
    pour &os;/&arch;. Il n'est pas possible actuellement
    d'utiliser un disque avec un autre syst&egrave;me d'exploitation. Ce
    disque n&eacute;cessite d'&ecirc;tre attach&eacute; &agrave; un
    controleur SCSI support&eacute; par le micro-code SRM ou un disque
    IDE si votre machine supporte le d&eacute;marrage sur des disques
    IDE.</para>

    <para arch="alpha">Votre syst&egrave;me de fichier "root" DOIT &ecirc;tre
    la premi&egrave;re partition (partition <literal>a</literal>) sur le
    disque de d&eacute;marrage.</para>

    <para arch="alpha">Vous devez disposer le micro-code de console
    SRM pour cette plateforme. Dans certains cas, il est possible
    de changer les micro-codes AlphaBIOS (ou ARC) et SRM. Dans les
    autres cas il est n&eacute;cessaire de t&eacute;l&eacute;charger le nouveau
    micro-code depuis le site Web du constructeur.</para>

    <para>Si vous n'&ecirc;tes pas familier sur la configuration du
    mat&eacute;riel avec &os;, vous devrez lire le fichier
    <filename>HARDWARE.TXT</filename> qui contient d'importantes
    informations sur le mat&eacute;riel support&eacute; par &os;.</para>
  </sect2>

  <sect2 id="floppies">
  <title>Installation depuis une disquette image</title>

  <para>Suivant la façon choisie pour l'installation de &os; vous
  pourriez avoir à créer un jeu de disquettes
  (généralement deux) pour commencer l'installation. Cette
  section décrit brièvement la façon de créer ces
  disquettes que cela soit depuis le CDROM d'installation ou depuis
  Internet. Notez que la façon la plus courante d'installer &os est
  par un CDROM, sur une machine supportant le démarrage sur CDROM,
  et cette procédure ne sert donc à rien dans ce cas.</para>

  <para>Pour une installation standard depuis le réseau ou un
  CDROM, tout ce que vous avez besoin d'effectuer est la copie sur des
  disquettes les fichiers images <filename>kern.flp</filename> et
  <filename>mfsroot.flp</filename> depuis le répertoire
  <filename>floppies/</filename> (pour des disquettes 1.44Mo).</para>

  <para>Rapatrier ces images depuis le réseau, est très
  simple. Rapatriez simplement les 
  <replaceable>release</replaceable><filename>/floppies/kern.flp</filename>
  et
  <replaceable>release</replaceable><filename>/floppies/mfsroot.flp</filename>
  fichiers depuis <ulink
  url="&release.url;"></ulink>
  ou un des sites mirroirs listé à la section  <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/mirrors-ftp.html">sites FTP
    </ulink> du guide de régerence ou depuis les pages Web 
    <ulink url="http://www.freebsdmirrors.org/"></ulink>.
  </para>

  <para>Obtenez des disquette vierges formattées et copiez l'
  image <filename>kern.flp</filename> sur une et
  <filename>mfsroot.flp</filename> sur l'autre. Ces images
  <emphasis>ne sont pas</emphasis> des fichiers DOS. Vous ne pouvez
  pas simplement les copier sur une disquette DOS ou UFS comme des
  fichiers standard, vous devez les copier comme une
  <quote>image</quote> en utilisant <filename>fdimage.exe</filename>
  sous DOS (voyez le répertoire <filename>tools</filename> sur le
  CDROM ou site mirroir FTP de &os;) ou la commande UNIX
  &man.dd.1;.</para>

  <para>Par exemple, pour créer la disquette image du noyau depuis
  DOS, vous devrez taper quelque chose comme:</para>

  <screen><prompt>C></prompt> <userinput>fdimage kern.flp a:</userinput></screen>

  <para>En assumant que vous avez copié
  <filename>fdimage.exe</filename> et <filename>kern.flp</filename>
  dans un répertoire.  Vous devrez effectuer la même
  opération pour <filename>mfsroot.flp</filename>.</para>

  <para>Si vous créez les disquettes de démarrage depuis une
  machine UNIX, quelque chose comme:</para>

  <screen>&prompt.root; <userinput>dd if=floppies/kern.flp of=/dev/rfd0</userinput></screen>

  <para>ou</para>

  <screen>&prompt.root; <userinput>dd if=floppies/kern.flp of=/dev/floppy</userinput></screen>

  <para>fonctionne parfaitement, suivant votre matériel et
  système d'exploitation (différentes version d'UNIX ont des
  noms différents pour le lecteur de disquette).</para>

  <para arch="alpha">Si vous disposez d'une machine alpha qui peut
  démarrer les images depuis le réseau ou si vous disposez d'un
  lecteur de disquette 2.88Mo ou LS-120 capable depuis une machine x86
  de créer une image 2.88Mo, vous pouvez utiliser l'image unique
  (mais deux fois plus grosse)  <filename>boot.flp</filename>. Ce
  fichier contient <filename>kern.flp</filename> et 
  <filename>mfsroot.flp</filename> sur une seule disquette. Ce fichier
  peut aussi être utilisé comme une image de démarrage pour
  ceux créeant des images de démarrage pour CD <quote>El
  Torito</quote> Voyez la commande  &man.mkisofs.8; pour plus
  d'informations.</para>

  </sect2>

  <sect2 id="start-installation">
      <title>Installation de &os; depuis un CDROM ou Internet</title>

      <para arch="i386">La façon la plus simple d'effectuer
      l'installation est d'utiliser un CDROM. Si vous disposez d'un
      lecteur de CDROM supporté et du CDROM d'installation de &os;,
      il y a deux façon de démarrer cette installation:
        <itemizedlist>
          <listitem>
            <para>Si votre système supporte le démarrage depuis
            un CDROM (souvent il s'agit d'une option qui peut être
            sélectionnée via le menu d'un controleur ou depuis
            le BIOS du PC sur certains systèmes) et que vous l'avez
            activé, &os; supporte le standard de démarrage
            <quote>El Torito</quote>. Insérez tout simplement le CD
            dans le lecteur de CDROM et démarrez le système pour
            commencer l'installation.</para>
	  </listitem>
	  <listitem>
	    <para>Créer un jeu de disquette de démarrage de &os;
            depuis le répertoire <filename>floppies/</filename>. En
            utilisant le script <filename>makeflp.bat</filename>
            depuis DOS ou en lisant la 
            <xref linkend="floppies"> pour plus d'informations sur la
            création de disquettes de démarrage sous
            différents systèmes. Vous démarrerez depuis la
            première disquette et vous vous trouverez rapidement
            dans l'installation de &os;.</para>
          </listitem>
        </itemizedlist>
      </para>

      <para arch="i386">Si vous ne disposez pas d'un CDROM (ou si
      votre ordinateur ne supporte par le démarrage depuis un
      CDROM) ou si vous désirez installer via le réseau en
      utilisant PPP, SLIP ou une connexion dédié; vous devez
      commencer par créer un jeu de disquette de démarrage &os;
      depuis les fichiers <filename>floppies/kern.flp</filename> et
      <filename>floppies/mfsroot.flp</filename> en suivant les
      instructions que vous trouverez à la  
      <xref linkend="floppies">. Redémarrez votre ordinateur en utilisant
      la disquette <filename>kern.flp</filename> et lorsqu'on vous le
      demande, inserez alors la disquette
      <filename>mfsroot.flp</filename>. Allez à la <xref
      linkend="ftpnfs"> pour plus d'information sur l'installation
      via FTP ou NFS.</para>

      <para arch="alpha">La façon la plus simple d'effectuer
      l'installation est d'utiliser un CDROM. Si vous disposez d'un
      lecteur de CDROM supporté et du CDROM d'installation de &os;,
      vous pouvez démarer &os; directement depuis le
      CDROM. Insérez le CDROM dans le lecteur et tapez la commande
      suivante pour démarrer l'installation (en substituant le nom
      du lecteur de CDROM approprié):</para>

      <screen arch="alpha">&gt;&gt;&gt;<userinput>boot dka0</userinput></screen>

      <para arch="alpha">Sinon, vous pouvez démarrer l'installation
      depuis un lecteur de disquette. Vous devez donc commencer
      l'installation en créeant un jeu de disquette de démarrage
      de &os; depuis les fichiers <filename>floppies/kern.flp</filename> et
      <filename>floppies/mfsroot.flp</filename> en suivant les
      instructions que vous trouverez à la  <xref
      linkend="floppies">. Depuis l'invite de console SRM
      (<literal>&gt;&gt;&gt;</literal>), inserez la disquette
      <filename>kern.flp</filename> et tapez la commande suivante pour
      démarrer l'installation:</para>

      <screen arch="alpha">&gt;&gt;&gt;<userinput>boot dva0</userinput></screen>

      <para arch="alpha">Insérez alors la disquette
      <filename>mfsroot.flp</filename> au moment ou le système la
      demande et vous finirez alors le premier écran
      d'installation.</para>

  </sect2>
  <sect2>
    <title>Détails de différents types d'installation</title>

    <para>Dès que vous arrivez à au premier écran
    d'installation, vous devez pouvoir suivre les différents
    menus. Si vous n'avez jamais utilisé l'installeur de &os;
    précédemment, vous êtes encouragés à lire la
    documentation dans le menu Documentation tout comme les
    instructions <quote>d'usage</quote> général du premier
    menu.</para>

    <note>
      <para>Si vous êtes perdu sur un écran, pressez la touche
      <keycap>F1</keycap> pour la documentation en ligne sur la section
      courante.</para>
    </note>

    <para>Si vous n'avez jamais installé &os; précedemment, le
    mode d'installation <quote>Standard</quote> est recommandé, car
    il vérifie que vous visitez toutes les portions importantes
    nécessaires. Si vous connaissez le processus d'installation de
    &os; et que vous savez <emphasis>exactement</emphasis> ce que vous
    faites, utilisez l'option d'installation <quote>Express</quote> ou
    <quote>Custom</quote>. Si vous mettez à jour depuis un
    système existant, utilisez l'option <quote>Upgrade</quote>.</para>

    <para>L'installeur de &os; supporte l'utilisation de lecteur de
    disquette, DOS, CDROM, FTP, lecteur de bande ou partitions NFS et
    UFS comme média d'installation; plus d'informations sur
    l'installagion depuis chaque type de média sont listés
    ci-dessous.</para>

    <para arch="alpha">Une fois la procédure d'installation finit,
    vous pourrez démarrer &os;/&arch; en tapant quelque chose comme
    ceci à l'invite SRM:</para>

    <screen arch="alpha">&gt;&gt;&gt;<userinput>boot dkc0</userinput></screen>

    <para arch="alpha">Cela demande au micro-code de démarrer
    depuis le disque spécifié. Pour trouver le nom SRM des
    disque de votre machine, utilisez la commande <literal>show
    device</literal>:</para>

    <screen arch="alpha">&gt;&gt;&gt;<userinput>show device</userinput>
dka0.0.0.4.0               DKA0           TOSHIBA CD-ROM XM-57  3476
dkc0.0.0.1009.0            DKC0                       RZ1BB-BS  0658
dkc100.1.0.1009.0          DKC100             SEAGATE ST34501W  0015
dva0.0.0.0.1               DVA0
ewa0.0.0.3.0               EWA0              00-00-F8-75-6D-01
pkc0.7.0.1009.0            PKC0                  SCSI Bus ID 7  5.27
pqa0.0.0.4.0               PQA0                       PCI EIDE
pqb0.0.1.4.0               PQB0                       PCI EIDE</screen>

    <para arch="alpha">Cet exemple est extrait d'une Digital Personal
    Workstation 433au et montre trois disques attachés à cette
    machine. Le premier est un CDROM appelé
    <devicename>dka0</devicename> et les deux autres sont des disques
    appelés respectivement <devicename>dkc0</devicename> et
    <devicename>dkc100</devicename>.</para>

    <para arch="alpha">Vous pouvez spécifier le noyau à charger
    et quelles options de démarrage utiliser via les options
    <option>-file</option> et <option>-flags</option>:</para>

    <screen arch="alpha"><prompt>&gt;&gt;&gt;</prompt> <userinput>boot -file kernel.old -flags s</userinput></screen>

    <para arch="alpha">Pour démarrer automatiquement &os;/&arch;
    utilisez les commandes:</para>

    <screen arch="alpha"><prompt>&gt;&gt;&gt;</prompt> <userinput>set boot_osflags a</userinput>
<prompt>&gt;&gt;&gt;</prompt> <userinput>set bootdef_dev dkc0</userinput>
<prompt>&gt;&gt;&gt;</prompt> <userinput>set auto_action BOOT</userinput></screen>

    <sect3>
      <title>Installation depuis un CDROM réseau</title>

      <para>Si vous désirez installer depuis un lecteur de CDROM
      local voyez la <xref linkend="start-installation">. Si vous ne
      disposez pas d'un lecteur de CDROM sur votre système et que
      vous désirez utiliser une distribution CD de &os; dans le
      lecteur CDROM d'une autre machine que vous pouvez accéder via
      le réseau, il y a plusieurs façon d'y arriver:</para>

      <itemizedlist>
        <listitem>
          <para>Si vous voulez pouvoir installer via FTP &os;,
          directement depuis le lecteur de CDROM d'une machine &os;,
          c'est très simple: Vous pouvez tout simplement ajouter la
          ligne suivante à votre fichier des mots de passe (en
          utilisant la commande &man.vipw.8;):</para>

          <screen>ftp:*:99:99::0:0:FTP:/cdrom:/sbin/nologin</screen>

          <para>Sur la machine que vous voulez installer, allez dans
          le menu Options et mettez le Release Name à
          <literal>any</literal>. Vous pouvez alors choisir comme type
          de média  <literal>FTP</literal> et taper
          <filename>ftp://<replaceable>machine</replaceable></filename>
          après avoir choisi <quote>URL</quote> dans le menu des
          sites ftp.</para>

          <warning>
	    <para>: Cela permet à n'importe qui depuis le réseau
            local (ou Internet) de se connecter via <quote>FTP anonyme
            </quote> à cette machine, ce qui peut ne pas être
            voulu.</para>
	  </warning>
	</listitem>

	<listitem>
	  <para>Si vous préférez utiliser NFS pour exporté le
          CDROM sur la machine que vous installez, vous devez en
          premier ajouter une ligne au fichier
          <filename>/etc/exports</filename> (sur la machine disposant
          du lecteur de CDROM). L'exemple ci-dessous autorise la
          machine <hostid role="hostname">ziggy.foo.com</hostid> à
          monter le CDROM via NFS lors de l'installation:</para>

	  <screen>/cdrom          -ro             ziggy.foo.com</screen>

	  <para>La machine contenant le CDROM doit, bien sur, être
          configurée en serveur NFS, et si vous n'en êtes pas
          sur, une installation via NFS n'est pas le meilleur des
          choix, sauf si vous voulez lire &man.rc.conf.5; et
          configurer les choses correctement. En assumant que cette
          partie se passe bien, vous devriez être capable d'entrer:
          <filename><replaceable>cdrom-host</replaceable>:/cdrom</filename> 
          comme répertoire d'installation NFS pour la machine à
          installer, e.g. <filename>wiggy:/cdrom</filename>.</para>
	</listitem>
      </itemizedlist>
    </sect3>

    <sect3>
      <title>Installing from Floppies</title>

      <para>If you must install from floppy disks, either due to
      unsupported hardware or just because you enjoy doing things the
      hard way, you must first prepare some floppies for the
      install.</para>

      <para>First, make your boot floppies as described in
      <xref linkend="floppies">.</para>

      <para>Second, peruse <xref linkend="layout"> and pay special attention
      to the <quote>Distribution Format</quote> section since it describes which
      files you're going to need to put onto floppy and which you can
      safely skip.</para>

      <para>Next you will need, at minimum, as many 1.44MB floppies as
      it takes to hold all files in the <filename>bin</filename>
      (binary distribution) directory.  If you're preparing these
      floppies under DOS, then these floppies
      <emphasis>must</emphasis> be formatted using the MS-DOS
      <filename>FORMAT</filename> command.  If you're using Windows,
      use the Windows File Manager format command.</para>

      <important>
        <para>Frequently, floppy disks come <quote>factory
        preformatted</quote>.  While convenient,
        many problems reported by users in the past have resulted
        from the use of improperly formatted media.
        Re-format them yourself, just to make sure.</para>
      </important>

      <para>If you're creating the floppies from another &os;
      machine, a format is still not a bad idea though you don't need
      to put a DOS filesystem on each floppy.  You can use the
      &man.disklabel.8; and &man.newfs.8; commands to put a UFS filesystem on a
      floppy, as the following sequence of commands
      illustrates:</para>

      <screen>&prompt.root; <userinput>fdformat -f 1440 fd0.1440</userinput>
&prompt.root; <userinput>disklabel -w -r fd0.1440 floppy3</userinput>
&prompt.root; <userinput>newfs -t 2 -u 18 -l 1 -i 65536 /dev/fd0</userinput></screen>

      <para>After you've formatted the floppies for DOS or UFS, you'll
      need to copy the files onto them.  The distribution files are
      split into chunks conveniently sized so that 5 of them will fit
      on a conventional 1.44MB floppy.  Go through all your floppies,
      packing as many files as will fit on each one, until you've got
      all the distributions you want packed up in this fashion.  Each
      distribution should go into its own subdirectory on the floppy,
      e.g.: <filename>a:\bin\bin.inf</filename>, <filename>a:\bin\bin.aa</filename>, <filename>a:\bin\bin.ab</filename>, ...</para>

      <important>
        <para>The <filename>bin.inf</filename> file also needs to go on the first floppy of
        the <filename>bin</filename> set since it is read by the installation program in
        order to figure out how many additional pieces to look for
        when fetching and concatenating the distribution.  When
        putting distributions onto floppies, the
        <filename>distname.inf</filename> file <emphasis>must</emphasis> occupy the first
        floppy of each distribution set.  This is also covered in
        <filename>README.TXT</filename>.</para>
      </important>

      <para>Once you come to the Media screen of the install, select
      <quote>Floppy</quote> and you'll be prompted for the rest.</para>
    </sect3>

    <sect3 arch="i386">
      <title>Installing from a DOS partition</title>

      <para>To prepare for installation from an MS-DOS partition you
      should simply copy the files from the distribution into a
      directory called <filename>FREEBSD</filename> on the Primary DOS partition (<devicename>C:</devicename>).  For example, to do a minimal installation of &os; from
      DOS using files copied from the CDROM, you might do something
      like this:</para>

      <screen><prompt>C:\></prompt> <userinput>MD C:\FREEBSD</userinput>
<prompt>C:\></prompt> <userinput>XCOPY /S E:\BIN C:\FREEBSD\BIN</userinput></screen>

      <para>Assuming that <devicename>E:</devicename> was where your CD was mounted.</para>

      <para>For as many distributions as you wish to install from DOS (and
      you have free space for), install each one in a directory under
      <filename>C:\FREEBSD</filename> - the <filename>BIN</filename> dist is only the minimal requirement.</para>

      <para>Once you've copied the directories, you can simply launch
      the installation from floppies as normal and select <quote>DOS</quote> as
      your media type when the time comes.</para>
    </sect3>

    <sect3>
      <title>Installing from QIC/SCSI Tape</title>

      <para>When installing from tape, the installation program
      expects the files to be simply tar'ed onto it, so after fetching
      all of the files for the distributions you're interested in,
      simply use &man.tar.1; to get them onto the tape with a command something like
      this:</para>

      <screen>&prompt.root; <userinput>cd <replaceable>/where/you/have/your/dists</replaceable></userinput>
&prompt.root; <userinput>tar cvf /dev/rsa0 <replaceable>dist1</replaceable> .. <replaceable>dist2</replaceable></userinput></screen>

      <para>When you go to do the installation, you should also make
      sure that you leave enough room in some temporary directory
      (which you'll be allowed to choose) to accommodate the <emphasis>full</emphasis>
      contents of the tape you've created.  Due to the non-random
      access nature of tapes, this method of installation requires
      quite a bit of temporary storage.  You should expect to require
      as much temporary storage as you have stuff written on tape.</para>

      <note>
        <para>When going to do the installation, the tape must be in
        the drive <emphasis>before</emphasis> booting from the boot floppies.  The
        installation <quote>probe</quote> may otherwise fail to find it.</para>
      </note>

      <para>Now create a boot floppy as described in <xref linkend="floppies"> and
      proceed with the installation.</para>
    </sect3>

    <sect3 id="ftpnfs">
      <title>Installing over a Network using FTP or NFS</title>

      <para>After making the boot floppies as described in the first
      section, you can load the rest of the installation over a
      network using one of 3 types of connections:  serial port,
      parallel port, or Ethernet.</para>

      <sect4>
        <title>Serial Port</title>

	<para>SLIP support is rather primitive, and is limited
        primarily to hard-wired links, such as a serial cable running
        between two computers.  The link must be hard-wired because
        the SLIP installation doesn't currently offer a dialing
        capability.  If you need to dial out with a modem or otherwise
        dialog with the link before connecting to it, then I recommend
        that the PPP utility be used instead.</para>

        <para>If you're using PPP, make sure that you have your
        Internet Service Provider's IP address and DNS information
        handy as you'll need to know it fairly early in the
        installation process.  You may also need to know your own IP
        address, though PPP supports dynamic address negotiation and
        may be able to pick up this information directly from your ISP
        if they support it.</para>

        <para>You will also need to know how to use the various <quote>AT
        commands</quote> for dialing out with your particular brand of modem
        as the PPP dialer provides only a very simple terminal
        emulator.</para>
      </sect4>

      <sect4>
        <title>Parallel Port</title>

	<para>If a hard-wired connection to another &os; or Linux
        machine is available, you might also consider installing over
        a <quote>laplink</quote> style parallel port cable.  The data rate over the
        parallel port is much higher than what is typically possible
        over a serial line (up to 50k/sec), thus resulting in a
        quicker installation.  It's not typically necessary to use
        <quote>real</quote> IP addresses when using a point-to-point parallel cable
        in this way and you can generally just use RFC 1918 style
        addresses for the ends of the link (e.g. <hostid
        role="ipaddr">10.0.0.1</hostid>, <hostid role="ipaddr">10.0.0.2</hostid>,
        etc).</para>

        <important>
	  <para>If you use a Linux machine rather than a &os;
          machine as your PLIP peer, you will also have to specify
          <option>link0</option> in the TCP/IP setup screen's <quote>extra options for
          ifconfig</quote> field in order to be compatible with Linux's
          slightly different PLIP protocol.</para>
	</important>

      </sect4>

      <sect4>
        <title>Ethernet</title>

	<para>&os; supports many common Ethernet cards; a table
        of supported cards is
        provided as part of the &os; Hardware Notes (see
        <filename>HARDWARE.TXT</filename> in
	the Documentation menu on the boot floppy or the top level
        directory of the CDROM).  If you are using one of the
        supported PCMCIA Ethernet cards, also be sure that it's
        plugged in <emphasis>before</emphasis> the laptop is powered on.  &os; does
        not, unfortunately, currently support <quote>hot insertion</quote> of
        PCMCIA cards during installation.</para>

        <para>You will also need to know your IP address on the
        network, the <option>netmask</option> value for your subnet and the
        name of your machine.  Your system administrator can tell you
        which values are appropriate to your particular network setup.
        If you will be referring to other hosts by name rather than IP
        address, you'll also need a name server and possibly the
        address of a gateway (if you're using PPP, it's your
        provider's IP address) to use in talking to it.  If you want
        to install by FTP via an HTTP proxy (see below), you will also
        need the proxy's address.</para>

        <para>If you do not know the answers to these questions then
        you should really probably talk to your system administrator
        <emphasis>first</emphasis> before trying this type of
        installation.  Using a randomly chosen IP address or netmask
        on a live network is almost guaranteed not to work, and will
        probably result in a lecture from said system administrator.</para>

        <para>Once you have a network connection of some sort working, the
	installation can continue over NFS or FTP.</para>
      </sect4>

      <sect4>
        <title>NFS installation tips</title>

        <para>NFS installation is fairly straight-forward: Simply copy
        the &os; distribution files you want onto a server
        somewhere and then point the NFS media selection at it.</para>

        <para>If this server supports only <quote>privileged port</quote> access (this is
        generally the default for Sun and Linux workstations), you
        will need to set this option in the Options menu before
        installation can proceed.</para>

        <para>If you have a poor quality Ethernet card which suffers from very
        slow transfer rates, you may also wish to toggle the appropriate
        Options flag.</para>

        <para>In order for NFS installation to work, the server must
        also support <quote>subdir mounts</quote>, e.g. if your &os;
        distribution directory lives on
        <filename>wiggy:/usr/archive/stuff/FreeBSD</filename>, then
        <hostid role="hostname">wiggy</hostid> will have to allow
        the direct mounting of <filename>/usr/archive/stuff/FreeBSD</filename>, not just
        <filename>/usr</filename> or <filename>/usr/archive/stuff</filename>.</para>

        <para>In &os;'s <filename>/etc/exports</filename> file this is controlled by the
        <option>-alldirs</option> option.  Other NFS servers may have different
        conventions.  If you are getting <literal>Permission Denied</literal> messages
        from the server then it's likely that you don't have this
        properly enabled.</para>
      </sect4>

      <sect4>
        <title>FTP Installation tips</title>

        <para>FTP installation may be done from any mirror site containing a
        reasonably up-to-date version of &os;.  A full menu of
        reasonable choices for almost any location in the world is
        provided in the FTP site menu during installation.</para>

        <para>If you are installing from some other FTP site not listed in
        this menu, or you are having troubles getting your name server
        configured properly, you can also specify your own URL by
        selecting the <quote>URL</quote> choice in that menu.  A URL can
        contain a hostname or an IP address, so something like the following would
        work in the absence of a name server:</para>

        <screen>ftp://216.66.64.162/pub/FreeBSD/releases/&arch;/4.2-RELEASE</screen>

        <para>There are three FTP installation modes you can use:
	  <itemizedlist>
	    <listitem>
	      <para>FTP:  This method uses the standard
              <quote>Active</quote> mode for transfers, in which the
              server initiates a connection to the client.  This will
              not work through most firewalls but will often work best
              with older FTP servers that do not support passive mode.
              If your connection hangs with passive mode, try this
              one.</para>
	    </listitem>
	    <listitem>
	      <para>FTP Passive:  This sets the FTP "Passive" mode
              which prevents the server from opening connections to
              the client.  This option is best for users to pass
              through firewalls that do not allow incoming connections
              on random port addresses.</para>
	    </listitem>
            <listitem>
	      <para>FTP via an HTTP proxy: This option instructs &os;
              to use HTTP to connect to a proxy for all FTP
              operations.  The proxy will translate the requests and
              send them to the FTP server.  This allows the user to
              pass through firewalls that do not allow FTP at all, but
              offer an HTTP proxy.  You must specify the hostname of
              the proxy in addition to the FTP server.</para>

	      <para>In the rare case that you have an FTP proxy that
              does not go through HTTP, you can specify the URL as
              something like:</para>

              <screen><userinput>ftp://foo.bar.com:<replaceable>port</replaceable>/pub/FreeBSD</userinput></screen>

              <para>In the URL above, <replaceable>port</replaceable>
              is the port number of the proxy FTP server.</para>
	    </listitem>
	  </itemizedlist>

      </sect4>
    </sect3>
    <sect3>
      <title>Tips for Serial Console Users</title>

      <para>If you'd like to install &os; on a machine using just a
      serial port (e.g. you don't have or wish to use a VGA card),
      please follow these steps:</para>

      <procedure>
	<step>
	  <para>Connect some sort of ANSI (vt100) compatible terminal
	  or terminal emulation program to the <devicename>COM1</devicename> port of the PC you
	  are installing &os; onto.</para>
	</step>
	<step>
	  <para>Unplug the keyboard (yes, that's correct!) and then
	  try to boot from floppy or the installation CDROM, depending
	  on the type of installation media you have, with the
	  keyboard unplugged.</para>
	</step>
	<step>
	  <para>If you don't get any output on your serial console,
	  plug the keyboard in again and wait for some beeps.  If you
	  are booting from the CDROM, proceed to <xref
	  linkend="hitspace"> as soon as you
	  hear the beep.</para>
	</step>
	<step>
	  <para>For a floppy boot, the first beep means to remove the
	  <filename>kern.flp</filename> floppy and insert the
	  <filename>mfsroot.flp</filename> floppy, after
	  which you should press <keycap>Enter</keycap> and wait for another beep.</para>
	</step>
	<step id="hitspace">
	  <para>Hit the space bar, then enter</para>

	  <screen><userinput>boot -h</userinput></screen>

	  <para>and you should now definitely be seeing everything on
	  the serial port.  If that still doesn't work, check your
	  serial cabling as well as the settings on your terminal
	  emulation program or actual terminal device.  It should be
	  set for 9600 baud, 8 bits, no parity.</para>
	</step>
      </procedure>
    </sect3>
  </sect2>

  <sect2>
    <title>Question and Answer Section for &arch.print; Architecture Users</title>

    <qandaset arch="i386">
      <qandaentry>
        <question>
	  <para>Help!  I have no space!  Do I need to delete
	  everything first?</para>
	</question>
	<answer>
	  <para>If your machine is already running DOS and has little
	  or no free space available for &os;'s installation, all is
	  not lost!  You may find the <application>FIPS</application>
	  utility, provided in the <filename>tools/</filename>
	  subdirectory on the &os; CDROM or on the various &os; ftp
	  sites, to be quite useful.</para>

	  <para><application>FIPS</application> allows you to split an
	  existing DOS partition into two pieces, preserving the
	  original partition and allowing you to install onto the
	  second free piece.  You first <quote>defrag</quote> your DOS
	  partition, using the DOS 6.xx <filename>DEFRAG</filename>
	  utility or the <application>Norton Disk Tools</application>,
	  then run FIPS.  It will
	  prompt you for the rest of the information it needs.
	  Afterwards, you can reboot and install &os; on the new
	  partition.  Also note that FIPS will create the second
	  partition as a <quote>clone</quote> of the first, so you'll
	  actually see that you now have two DOS Primary partitions
	  where you formerly had one.  Don't be alarmed!  You can
	  simply delete the extra DOS Primary partition (making sure
	  it's the right one by examining its size).</para>

	  <para><application>FIPS</application> does NOT currently
          work with NTFS style partitions.  To split up such a
          partition, you will need a commercial product such as
          <application>Partition Magic</application>.  Sorry, but this
          is just the breaks if you've got a Windows partition hogging
          your whole disk and you don't want to reinstall from
          scratch.</para>
	  
	</answer>
      </qandaentry>

      <qandaentry>
        <question>
	  <para>Can I use compressed DOS filesystems from
	  &os;?</para>
	</question>

	<answer>
	  <para>No.  If you are using a utility such as
	  <application>Stacker</application>(tm) or
	  <application>DoubleSpace</application>(tm), &os; will only
	  be able to use whatever portion of the filesystem you leave
	  uncompressed.  The rest of the filesystem will show up as
	  one large file (the stacked/dblspaced file!).  <emphasis>Do
	  not remove that file</emphasis> as you will probably regret
	  it greatly!</para>

	  <para>It is probably better to create another uncompressed DOS
	  extended partition and use this for communications between
	  DOS and &os; if such is your desire.</para>
	</answer>
      </qandaentry>

      <qandaentry>
        <question>
	  <para>Can I mount my DOS extended partitions?</para>
	</question>

	<answer>
	  <para>Yes.  DOS extended partitions are mapped in at the end
	  of the other <quote>slices</quote> in &os;, e.g. your <devicename>D:</devicename> drive might
	  be <filename>/dev/da0s5</filename>, your <devicename>E:</devicename> drive <filename>/dev/da0s6</filename>, and so on. This
	  example assumes, of course, that your extended partition is
	  on SCSI drive 0. For IDE drives, substitute <literal>ad</literal> for
	  <literal>da</literal> appropriately. You otherwise mount extended
	  partitions exactly like you would mount any other DOS drive,
	  e.g.:</para>

	  <screen>&prompt.root; <userinput>mount -t msdos /dev/da0s5 /dos_d</userinput></screen>
	</answer>
      </qandaentry>

      <qandaentry>
        <question>
	  <para>Can I run DOS binaries under &os;?</para>
	</question>

	<answer>
	  <para>Ongoing work with BSDI's &man.doscmd.1; utility will
	  suffice in many cases, though
	  it still has some rough edges.  If you're interested in
	  working on this, please send mail to the &a.emulation;
	  and indicate that you're interested in joining this ongoing
	  effort!</para>

	  <para>The <filename role="package">emulators/pcemu</filename> port/package in the
	  &os; Ports Collection which emulates an 8088 and enough BIOS
	  services to run DOS text mode applications.  It requires the
	  X Window System (XFree86) to operate.</para>
	</answer>
      </qandaentry>
    </qandaset>

    <qandaset arch="alpha">
      <qandaentry>
        <question>
	  <para>Can I boot from the ARC or Alpha BIOS Console?</para>
	</question>

	<answer>
	  <para>No.  &os;, like Compaq Tru64 and VMS, will only boot
	  from the SRM console.</para>
	</answer>
      </qandaentry>

      <qandaentry>
        <question>
	  <para>Help!  I have no space!  Do I need to delete
	  everything first?</para>
	</question>

	<answer>
	  <para>Unfortunately, yes.</para>
	</answer>
      </qandaentry>

      <qandaentry>
        <question>
	  <para>Can I mount my Compaq Tru64 or VMS extended partitions?</para>
	</question>

	<answer>
	  <para>No, not at this time.</para>
	</answer>
      </qandaentry>

      <qandaentry>
        <question>
	  <para>What about support for Compaq Tru64 (OSF/1) binaries?</para>
	</question>

	<answer>
	  <para>&os; can run Tru64 applications very well using the
	  <filename role="package">emulators/osf1_base</filename> port/package.</para>
	</answer>
      </qandaentry>

      <qandaentry>
        <question>
	  <para>What about support for Linux binaries?</para>
	</question>

	<answer>
	  <para>&os; can run AlphaLinux binaries with the assistance
	  of the <filename role="package">emulators/linux_base</filename>
	  port/package.</para>
	</answer>
      </qandaentry>

      <qandaentry>
        <question>
	  <para>What about support for NT Alpha binaries?</para>
	</question>

	<answer>
	  <para>&os; is not able to run NT applications natively,
	  although it has the ability to mount NT partitions.</para>
	</answer>
      </qandaentry>
    </qandaset>
  </sect2>
</sect1>
