<!-- $FreeBSD$ -->

<sect1 id="floppies">
  <title>Floppy Disk Image Instructions</title>

  <para>For a normal CDROM or network installation, all you need to
  copy onto actual floppies from the <filename>floppies/</filename> directory are the
  <filename>kern.flp</filename> and <filename>mfsroot.flp</filename>
  images (for 1.44MB floppies).</para>

  <para>Getting these images over the network is easy.  simply fetch
  the
  <replaceable>release</replaceable><filename>/floppies/kern.flp</filename>
  and
  <replaceable>release</replaceable><filename>/floppies/mfsroot.flp</filename>
  files from <ulink
  url="ftp://ftp.freebsd.org/pub/FreeBSD">ftp://ftp.freebsd.org/pub/FreeBSD</ulink>
  or one of the many mirrors listed at <ulink
  url="http://www.freebsd.org/handbook/mirrors.html">http://www.freebsd.org/handbook/mirrors.html</ulink>.
  </para>

  <para>Get two blank, freshly formatted floppies and image copy
  <filename>kern.flp</filename> onto one and <filename>mfsroot.flp</filename> onto the other.  These images are
  <emphasis>not</emphasis> DOS files!  You cannot simply copy them to a DOS or UFS floppy
  as regular files, you need to <quote>image</quote> copy them to the floppy with
  <filename>fdimage.exe</filename> under DOS (see the
  <filename>tools</filename> directory on your CDROM or &os; FTP
  mirror) or the &man.dd.1; command in UNIX.</para>

  <para>For example, to create the kernel floppy image from DOS, you'd
  do something like this:</para>

  <screen><userinput>C> fdimage kern.flp a:</userinput></screen>

  <para>Assuming that you'd copied <filename>fdimage.exe</filename> and <filename>kern.flp</filename> into a directory
  somewhere.  You would do the same for <filename>mfsroot.flp</filename>, of course.</para>

  <para>If you're creating the boot floppy from a UNIX machine, you
  may find that:</para>

  <screen>&prompt.root; <userinput>dd if=floppies/kern.flp of=/dev/rfd0</userinput></screen>

  <para>or</para>

  <screen>&prompt.root; <userinput>dd if=floppies/kern.flp of=/dev/floppy</userinput></screen>

  <para>work well, depending on your hardware and operating system
  environment (different versions of UNIX have totally different names
  for the floppy drive).</para>

  <para arch="alpha">If you're on an alpha machine that can network-boot its
  floppy images or you have a 2.88MB or LS-120 floppy capable of
  taking a 2.88MB image on an x86 machine, you may wish to use
  the older (but now twice as large) <filename>boot.flp</filename> image which we also
  provide.  That contains the contents of <filename>kern.flp</filename> and <filename>mfsroot.flp</filename> on
  a single floppy, essentially.  This file should also be used as the
  boot file for those mastering <quote>El Torito</quote> bootable CD images.  See
  the &man.mkisofs.8; command for more information.</para>

  <para>Going to two installation boot floppies is a step we
  definitely would have rather avoided but we simply no longer could
  due to general code bloat and &os;'s many new device drivers in
  <filename>GENERIC</filename>.</para>

  <para>One positive side-effect of this new organizational scheme,
  however, is that it also allows one to easily make one's own
  <filename>kern.flp</filename> or <filename>mfsroot.flp</filename> floppies
  should a need to customize some aspect of the installation process
  or use a custom kernel for an otherwise unsupported piece of
  hardware arise.  As long as the kernel is compiled with
  <literal>options MFS</literal> and <literal>options
  MFS_ROOT</literal>, it will properly look for and boot an
  <filename>mfsroot.flp</filename> image in memory when run (see how
  <filename>/boot/loader.rc</filename> in
  <filename>kern.flp</filename> does its thing).  The
  <filename>mfsroot.flp</filename> image is also just a gzip'd
  filesystem image which is used as root, something which can be made
  rather easily using &man.vnconfig.8;.  If none of that makes any
  sense to you then don't worry about it - just use the
  <filename>kern.flp</filename> and <filename>mfsroot.flp</filename>
  images as described above.</para>

</sect1>
